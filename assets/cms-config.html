{{/*  VARIABLES  */}}

{{- $local            := eq (getenv "HUGO_CMS_LOCAL") "true" -}}
{{- $options          := site.Data.options -}}
{{- $taxonomies       := site.Data.utilities.taxonomies -}}
{{- $fontawesome_link := print "[fontawesome.com](https://fontawesome.com/search?o=r&s=" (site.Data.design.icons.type | default "solid") "&f=brands%2Cclassic)" -}}
{{- $multihost        := ne
  (index .AllTranslations 0).Site.BaseURL
  (index .AllTranslations 1).Site.BaseURL
  | and .IsTranslated
-}}


{{/*  REPEATED OBJECTS  */}}

{{- $font_keys   := dict "widget" `object` "collapsed" true "summary" "{{fields.family}} · {{fields.weight}} {{fields.italic}}" -}}
{{- $font_fields := slice
  (dict "label" `Familia`        "name" `family`      "widget" `string` "hint" "Nombres válidos → [Google Fonts](https://fonts.google.com/)")
  (dict "label" `Grosor`         "name" `weight`      "widget" `select`  "default" 0 "options" $options.font_weight)
  (dict "label" `Grosor Negrita` "name" `strong`      "widget" `select`  "default" 0 "options" $options.font_weight)
  (dict "label" `Cursiva`        "name" `italic`      "widget" `boolean`)
  (dict "label" `Alto de Línea`  "name" `line-height` "widget" `number` "value_type" `float` "step" 0.01 "min" 0 "max" 3 "default" 1.25)
-}}
{{- $font        := $font_keys | merge (dict "fields" $font_fields) -}}
{{- $font_top    := $font_keys | merge
  (dict "fields"
    ($font_fields | append
      (dict "label" `Ajuste Vertical` "name" `top` "widget" `number` "required" false "value_type" `float` "step" 0.01 "min" -2 "max" 2)
    )
  )
-}}
{{- $base_color  := dict
  "widget"    `object`
  "collapsed" false
  "fields"    (slice
    (dict "label" `Color`          "name" `color`    "widget" `color`   "required" false "allow_input" true)
    (dict "label" `Versión Clara`  "name" `light`    "widget" `color`   "required" false "allow_input" true)
    (dict "label" `Versión Oscura` "name" `dark`     "widget" `color`   "required" false "allow_input" true)
    (dict "label" `Contraste`      "name" `contrast` "widget" `select`  "required" false "options" $options.contrast "hint" "Opciones de cambio del color y textos de botones según el fondo")
  )
-}}

{{- $title                := dict "label" `Título`        "name" `title`       "widget" `string`   "required" false -}}
{{- $title_required       := dict "label" `Título`        "name" `title`       "widget" `string` -}}
{{- $subtitle             := dict "label" `Subtítulo`     "name" `subtitle`    "widget" `string`   "required" false -}}
{{- $description          := dict "label" `Descripción`   "name" `description` "widget" `markdown` "required" false "show_raw" true -}}
{{- $description_required := dict "label" `Descripción`   "name" `description` "widget" `markdown`                  "show_raw" true -}}
{{- $price                := dict "label" `Precio`        "name" `price`       "widget" `string`   "required" false -}}
{{- $anchor               := dict "label" `Título Oculto` "name" `anchor`      "widget" `string`   "required" false "hint" "Encabezado y Ancla/Anchor Oculto que tendrá el enlace del título y del menú (para SEO)" -}}

{{- $title_size        := dict "label" `Tamaño de Título`          "name" `title_size`        "widget" `number`  "required" false "value_type" `float` "step" 0.1 "min" 0.1 "max" 2 -}}
{{- $uppercase         := dict "label" `Título en Mayúsculas`      "name" `uppercase`         "widget" `boolnew` "required" false -}}
{{- $underline         := dict "label" `Título Subrayado`          "name" `underline`         "widget" `boolnew` "required" false -}}
{{- $reading_time      := dict "label" `Mostrar Tiempo de Lectura` "name" `reading_time`      "widget" `boolnew` "required" false "hint" "Mostrar el tiempo estimado de lectura y número de palabras" -}}
{{- $hide_description  := dict "label" `Ocultar Descripciones`     "name" `hide_description`  "widget" `boolnew` "required" false "hint" "Ocultar descripciones en cada elemento de la rejilla" -}}
{{- $hide_categories   := dict "label" `Ocultar Categorías`        "name" `hide_categories`   "widget" `boolnew` "required" false "hint" "Ocultar categorías y etiquetas en cada elemento de la rejilla" -}}

{{- $image_hint            := "Admite vídeo (incluido de youtube y vimeo) mediante URL" -}}
{{- if not site.Data.config.lfs -}}
  {{- $image_hint           = print $image_hint " (solamente el nombre de archivo subido previamente a **Medios**)" -}}
{{- end -}}
{{- $image_hint             = print $image_hint " · Para establecer la imagen de miniatura del vídeo, subir desde **Medios** una imagen con el mismo nombre del archivo de vídeo pero con la extensión de la imagen (jpg, png, webp...)" -}}
{{- $image_hint_long       := "... En caso de ser un vídeo, puede establecerse una imagen de miniatura si a la URL se le añade al final '#poster=nombre-de-imagen.jpg' o, si es interno, subir desde **Medios** una imagen con el mismo nombre del archivo de vídeo pero con la extensión de la imagen (jpg, png, webp...) · Se puede autoreproducir el vídeo dejándolo mudo añadiéndole al final de la URL '#mute' · Se pueden establecer marcas de inicio y final del vídeo en segundos añadiendo al final de la URL '#t=2,7' o '#t=2' para el inicio solamente" -}}
{{- $image_src             := dict "label" `Imagen`                          "name" `image`       "widget" `image`   "required" false "choose_url" true "max_file_size" 512000000 "hint" $image_hint -}}
{{- $image_src_hover       := dict "label" `Imagen Alternativa`              "name" `image_hover` "widget" `image`   "required" false "choose_url" true "max_file_size" 512000000 "hint" "Aparecerá al pasar el cursor por encima" -}}
{{- $image_ratio           := dict "label" `Proporción de la Imagen`         "name" `ratio`       "widget" `select`  "required" false "options" $options.ratio                    "hint" "Normal por defecto" -}}
{{- $image_contain         := dict "label" `Imagen Ajustada a la Proporción` "name" `contain`     "widget" `boolnew` "required" false                                             "hint" "Para que no se recorte si se selecciona alguna proporción" -}}
{{- $image_border          := dict "label" `Imagen Borde`                    "name" `border`      "widget" `select`  "required" false "options" (where (where $options.color_base "name" "!=" "none") "name" "!=" "whatsapp") -}}
{{- $image_inset           := dict "label" `Imagen Incrustada`               "name" `inset`       "widget" `boolnew` "required" false                                             "hint" "Las imágenes se incrustan en el elemento como si este no tuviese márgenes internos" -}}
{{- $image_grayscale       := dict "label" `Imagen en Blanco y Negro`        "name" `grayscale`   "widget" `boolnew` "required" false                                             "hint" "Las imágenes recuperan el color al pasar el cursor por encima" -}}
{{- $image_no_video        := merge $image_src (dict "hint" "") -}}

{{- $options_color_base_normal := (where (where $options.color_base "name" "!=" "none") "name" "!=" "whatsapp") -}}
{{- $border_color         := dict "label" `Color del Borde`              "name" `border`        "widget" `select`  "required" false "options" $options_color_base_normal "hint" "Color alternativo por defecto" -}}
{{- $color                := dict "label" `Color del Fondo`              "name" `color`         "widget" `select`  "required" false "options" $options.color_bg -}}
{{- $gradient_color       := dict "label" `Color de Gradiente del Fondo` "name" `gradient`      "widget" `select`  "required" false "options" $options.color_bg -}}
{{- $gradient_type        := dict "label" `Tipo de Gradiente del Fondo`  "name" `gradient_type` "widget" `select`  "required" false "options" $options.gradient -}}
{{- $parallax             := dict "label" `Parallax`                     "name" `parallax`      "widget" `boolnew` "required" false "hint" "Aplica un efecto fijo o de desplazamiento lento en la imagen de fondo al hacer scroll" -}}
{{- $opacity              := dict "label" `Opacidad de Fondo`            "name" `opacity`       "widget" `number`  "required" false "value_type" `int` "step" 10 "min" 0 "max" 100 -}}
{{- $bg_opacity           := dict "label" `Opacidad de imagen de Fondo`  "name" `opacity`       "widget" `number`  "required" false "value_type" `int` "step" 10 "min" 0 "max" 100 -}}
{{- $color_opacity        := dict "label" `Opacidad de color de Fondo`   "name" `color_opacity` "widget" `number`  "required" false "value_type" `int` "step" 10 "min" 0 "max" 100 -}}
{{- $background_image     := merge $image_src (dict "label" `Imagen de Fondo` "name" `bg`) -}}

{{- $icon_pattern    := slice "^[a-z-)+$" "Solo minúsculas y guiones medios; sin espacios, eñes, ni caracteres extraños" -}}
{{- $icon_id         := dict "label" `Icono`           "name" `icon`       "widget" `string` "required" false "pattern" $icon_pattern      "hint" (print "Nombres válidos → " $fontawesome_link " o emojis") -}}
{{- $icon_type       := dict "label" `Tipo de Icono`   "name" `icon_type`  "widget" `select` "required" false "options" $options.icon_type "hint" "Arriba en grande, Lateral junto al texto y Abajo a modo de subrayado" -}}
{{- $icon_size       := dict "label" `Tamaño de Icono` "name" `icon_size`  "widget" `number` "required" false "value_type" `int` "step" 1 "min" 1 "max" 6 -}}
{{- $icon_color      := dict "label" `Color de Icono`  "name" `icon_color` "widget" `select` "required" false "options" $options_color_base_normal -}}

{{- $button_licon              := merge $icon_id (dict "label" `Icono del Enlace` "name" `licon`) -}}
{{- $button_link               := dict "label" `Enlace`                        "name" `link`     "widget" `string`  "required" false -}}
{{- $button_label              := dict "label" `Texto del Enlace`              "name" `label`    "widget" `string`  "required" false -}}
{{- $button_anchor             := dict "label" `Ancla del Enlace`              "name" `anchor`   "widget" `string`  "required" false "hint" "Texto/Anchor oculto que tendrá el enlace (para SEO)" -}}
{{- $button_ofuscate           := dict "label" `Enlace Ofuscado`               "name" `ofuscate` "widget" `boolnew` "required" false "hint" "Ésto hace que Google no considere el enlace como tal (para SEO)" -}}
{{- $button_font_alt           := dict "label" `Fuente Alternativa del Enlace` "name" `font_alt` "widget" `boolnew` "required" false -}}
{{- $button_ga4                := dict "label" `GA4`                           "name" `ga4`      "widget" `boolnew` "required" false "hint" "Marcarlo como evento en Google Analytics 4 (para posterior conversión)" -}}
{{- $button_color              := dict "label" `Color del Botón del Enlace`    "name" `button`   "widget" `select`  "required" false "options" $options.color_base -}}
{{- $button_color_with_hide    := (merge $button_color (dict "options" ($options.color_base | append (dict "value" "hide" "label" "Ocultar Botón / Enlace")))) -}}
{{- $button_color_without_none := (merge $button_color (dict "options" (where $options.color_base "name" "!=" "none"))) -}}

{{- $padding_hide   := dict "label" `Ocultar Márgenes Interiores` "name" `padding_hide`   "widget" `boolnew` "required" false -}}
{{- $padding_top    := dict "label" `Márgenes Interior Superior`  "name" `padding_top`    "widget" `number`  "required" false "value_type" `int` "step" 1 "min" 0 "max" 9 -}}
{{- $padding_bottom := dict "label" `Márgenes Interior Inferior`  "name" `padding_bottom` "widget" `number`  "required" false "value_type" `int` "step" 1 "min" 0 "max" 9 -}}

{{- $align        := dict "label" `Alineación del Contenido`               "name" `align`    "widget" `select` "options" $options.align                       "required" false -}}
{{- $align_y      := dict "label" `Alineación Vertical de Elementos`       "name" `align_y`  "widget" `select` "options" $options.align_y                     "required" false -}}
{{- $align_y_self := dict "label" `Alineación Vertical del Elemento`       "name" `align_y`  "widget" `select` "options" $options.align_y                     "required" false -}}
{{- $align_x      := dict "label" `Alineación Horizontal de Elementos`     "name" `align_x`  "widget" `select` "options" $options.align_x                     "required" false -}}
{{- $align_xl     := dict "label" `Alineación del Contenido en Escritorio` "name" `align_xl` "widget" `select` "options" $options.align                       "required" false "hint" "Alineación del contenido cuando el ancho de la ventana ≥ 1200px" -}}
{{- $order        := dict "label" `Orden del Elemento en Escritorio`       "name" `order`    "widget" `number` "value_type" `int` "step" 1 "min" -20 "max" 20 "required" false "hint" "Orden del elemento cuando el ancho de la ventana ≥ 1200px" -}}

{{- $shadow                   := dict "label" `Sombra`        "name" `shadow`      "widget" `boolnew` "required" false -}}
{{- $hide_shadow              := dict "label" `Quitar Sombra` "name" `hide_shadow` "widget" `boolnew` "required" false -}}

{{- $container_size           := dict "label" `Tamaño del Contenedor`             "name" `size`                   "widget" `select` "options" $options.size_container "required" false "hint" "Por defecto: Grande en Secciones, Pequeño en Modales" -}}
{{- $container_color          := dict "label" `Color del Contenedor`              "name" `container`              "widget" `select` "options" $options.color_bg       "required" false -}}
{{- $container_gradient_color := dict "label" `Color de Gradiente del Contenedor` "name" `container_gradient`     "widget" `select` "options" $options.color_bg       "required" false -}}
{{- $container_gradient_type  := dict "label" `Tipo de Gradiente del Contenedor`  "name" `container_grdient_type` "widget" `select` "options" $options.gradient       "required" false -}}
{{- $container_opacity        := dict "label" `Opacidad del Contenedor`           "name" `container_opacity`      "widget" `number` "required" false "value_type" `int` "step" 10 "min" 0 "max" 100 -}}

{{- $slider_active       := dict "label" `Activar Carrusel`             "name" `active`       "widget" `boolnew` "required" false                                       "hint" "Al activar se cambia el salto de línea de elementos por controles deslizantes (en caso de requerirlos)" -}}
{{- $slider_interval     := dict "label" `Intervalo del Carrusel`       "name" `interval`     "widget" `number`  "required" false "value_type" `int` "min" 0 "step" 100 "hint" "Al indicar algo se desplazará automáticamente en ese intervalo en milisegundos (no recomendado)" -}}
{{- $slider_hide_bullets := dict "label" `Ocultar Guías del Carrusel`   "name" `hide_bullets` "widget" `boolnew` "required" false -}}
{{- $slider_hide_arrows  := dict "label" `Ocultar Flechas del Carrusel` "name" `hide_arrows`  "widget" `boolnew` "required" false -}}

{{- $columns_num     := dict "label" `Número de Columnas`               "name" `num`          "widget" `select`  "required" false "options" $options.columns -}}
{{- $columns_num_xs  := dict "label" `2 Columnas en Resolución Mínima`  "name" `num_xs`       "widget" `boolnew` "required" false -}}
{{- $columns_span    := dict "label" `Ancho en Número de Columnas`      "name" `span`         "widget" `select`  "required" false "options" $options.columns -}}
{{- $grow            := dict "label" `Rellenar Ancho`                   "name" `grow`         "widget" `boolnew` "required" false "hint" "Rellenar el ancho de contenedor aumentando el ancho de los elementos o columnas (no aplica si se activa carrusel)" -}}
{{- $columns_gap     := dict "label" `Márgenes entre Elementos`         "name" `gap`          "widget" `number`  "required" false "value_type" `int` "step" 1 "min" 1 "max" 5 -}}
{{- $columns_padding := dict "label" `Márgenes internos en el Elemento` "name" `padding`      "widget" `number`  "required" false "value_type" `float` "step" 0.25 "min" 0 "max" 6 -}}
{{- $hide_radius     := dict "label" `Quitar Esquinas Redondeadas`      "name" `hide_radius`  "widget" `boolnew` "required" false "hint" "Quitar esquinas redondeadas en cada elemento" -}}
{{- $group_radius    := dict "label" `Esquinas Redondeadas en Conjunto` "name" `group_radius` "widget" `boolnew` "required" false "hint" "Esquinas redondeadas en el conjunto de elementos (no recomendado activar sin desactivar el anterior)" -}}
{{- $pill            := dict "label" `Modo Píldora`                     "name" `pill`         "widget" `boolnew` "required" false "hint" "Redondea la parte superior e inferior" -}}
{{- $card            := dict "label" `Modo Tarjeta`                     "name" `card`         "widget" `boolnew` "required" false "hint" "**BETA:** Utiliza la imagen como fondo + deja un margen superior para que se vea el fondo + alinea los contenido abajo y les añade un degradado a negro" -}}

{{- $gallery_max      := dict "label" `Número Máximo de Elementos` "name" `max`      "widget" `number`                  "required" false "value_type" `int` "min" 1 "hint" "Número máximo de elementos visibles, para ver el resto aparecerá un botón '+ Más' para desplegar una ventana modal donde aparecerán" -}}
{{- $gallery_columns  := dict "label" `Número de Columnas`         "name" `num`      "widget" `number`                  "required" false "value_type" `int` "step" 1 "min" 1 "max" 6 -}}
{{- $gallery_alt      := dict "label" `Estilo Alternativo`         "name" `alt`      "widget" `boolnew`                 "required" false "hint" "Cambia el estilo de tipo a rejilla a filas" -}}
{{- $gallery_wrap     := dict "label" `Envoltura`                  "name" `wrap`     "widget" `boolnew`                 "required" false "hint" "Añade una envoltura de color blanca alrededor del conjunto de imágenes, lo que aparenta bordes" -}}
{{- $gallery_gap      := dict "label" `Márgenes entre Elementos`   "name" `gap`      "widget" `boolnew`                 "required" false -}}
{{- $gallery_cover    := dict "label" `Recorte`                    "name" `cover`    "widget" `boolnew`                 "required" false "hint" "Recomendado para imágenes normales, no recomendado para logos e imágenes con transparencia de fondo" -}}
{{- $gallery_images   := dict "label" `Imágenes con Diapositivas`  "name" `images`   "widget" `image`   "multiple" true "choose_url" true "required" false "hint" "Sube varias imágenes de una vez que permiten hacer click para que se amplíen como pase de diapositivas" -}}


{{/*  CONTACT  */}}

{{- $contact_label           := merge $button_label (dict "label" `Texto`) -}}
{{- $contact_label_phone     := dict "label" `Número de Teléfono`            "name" `label`           "widget" `string` -}}
{{- $contact_full            := dict "label" `Ancho Completo`                "name" `full`            "widget" `boolnew` "required" false -}}
{{- $contact_address_active  := dict "label" `Mostrar el Botón de Ubicación` "name" `active`          "widget" `boolnew` "required" false "hint" "Si está desmarcado, los datos se usarán igualmente en el marcado interno para el SEO" -}}
{{- $contact_address_name    := dict "label" `Nombre en Google Maps`         "name" `name`            "widget" `string`  "required" false -}}
{{- $contact_streetAddress   := dict "label" `Calle`                         "name" `streetAddress`   "widget" `string`  "required" false -}}
{{- $contact_postalCode      := dict "label" `Código Postal`                 "name" `postalCode`      "widget" `number`  "required" false "value_type" `int` "min" 10000 "max" 99999 -}}
{{- $contact_addressLocality := dict "label" `Localidad`                     "name" `addressLocality` "widget" `string`  "required" false -}}
{{- $contact_addressRegion   := dict "label" `Región`                        "name" `addressRegion`   "widget" `string`  "required" false -}}
{{- $contact_addressCountry  := dict "label" `País`                          "name" `addressCountry`  "widget" `string`  "required" false -}}
{{- $contact_coordinates     := dict "label" `Coordenadas`                   "name" `coordinates`     "widget" `map`     "required" false -}}
{{- $contact_hidden          := dict "label" `hidden`                        "name" `hidden`          "widget" `hidden`  "required" false -}}
{{- $contact_address_fields  := slice
  $contact_address_active
  $contact_address_name
  $contact_streetAddress
  $contact_postalCode
  $contact_addressLocality
  $contact_addressRegion
  $contact_addressCountry
  $contact_coordinates
-}}

{{- $form_name        := dict "label" `Nombre`    "name" `name`        "widget" `string`                    "hint" "Nombre que tendrá el campo" -}}
{{- $form_placeholder := dict "label" `Resumen`   "name" `placeholder` "widget" `string`  "required" false  "hint" "Texto descriptivo del campo; Si no se especifica, se aplicará el nombre anterior" -}}
{{- $form_hint        := dict "label" `Leyenda`   "name" `hint`        "widget" `string`  "required" false  "hint" "Texto descriptivo del campo que aparece bajo éste" -}}
{{- $form_required    := dict "label" `Requerido` "name" `required`    "widget" `boolnew` "required" false  "hint" "Si es obligatorio especificar el campo" -}}
{{- $form_options     := dict "label" `Opciones`  "name" `options`     "widget" `list`    "label_singular" `Opción` "summary" "Opción: {{fields.option}}" "collapsed" true "allow_add" true "fields" (slice (dict "label" `Opción` "name" `option` "widget" `string` "required" false)) -}}
{{- $form_accept      := dict "label" `Archivos`  "name" `accept`      "widget" `string`                    "hint" "Extensiones de archivos aceptados, añadiendo el punto delante y separados por comas · Ejemplo: '.pdf,.png,.jpg,.jpeg'" -}}
{{- $form_fields      := slice
  $form_name
  $form_placeholder
  $form_hint
  $form_required
-}}


{{/*  SECTION DESIGN  */}}

{{- $section_header_article := dict "label" `Encabezado Sencillo`                "name" `header_article` "widget" `boolnew` "required" false "hint" "Añade el mismo encabezado que hay en el contenido sencillo y blog (también deja el menú accesible solamente mediante botón de hamburguesa)" -}}
{{- $section_id             := dict "label" `ID`                                 "name" `id`             "widget" `string`  "required" false "pattern" (slice "^[a-z-)+$" `Corto · Descriptivo · Sin palabras irrelevantes (de, por, para, el…) · En minúsculas · Sin espacios (guiones medios en su lugar) · Sin eñes (enes en su lugar) · Sin caracteres extraños ni barras bajas · Ejemplo: preguntas-frecuentes`) "hint" "Identificador personalizado · **Obligatorio para crear este archivo**, pero una vez creado, este campo se puede cambiar o incluso quitar · Es importante que sea único" -}}
{{- $section_full_screen    := dict "label" `Alto Mínimo de Pantalla`            "name" `full_screen`    "widget" `boolnew` "required" false -}}
{{- $section_image_min      := dict "label" `Ancho de Imagen en Ventana Pequeña` "name" `image_min`      "widget" `number`  "required" false "value_type" `int` "step" 1 "min" 0 "max" 18 -}}
{{- $section_image_max      := dict "label" `Ancho de Imagen en Ventana Grande`  "name" `image_max`      "widget" `number`  "required" false "value_type" `int` "step" 1 "min" 0 "max" 60 -}}
{{- $section_image_align    := dict "label" `Alineación de la Imagen`            "name" `image_align`    "widget" `select`  "required" false "options" $options.align -}}

{{- $divider_id     := dict "label" `Divisor`                    "name" `divider` "widget" `select`  "required" false "options" $options.divider "multiple" false "hint" "Visibles en → [sansoul.netlify.app/divisores/](https://sansoul.netlify.app/divisores/)" -}}
{{- $divider_flip_x := dict "label" `Voltear Divisor Horizontal` "name" `flip_x`  "widget" `boolnew` "required" false -}}
{{- $divider_flip_y := dict "label" `Voltear Divisor Vertical`   "name" `flip_y`  "widget" `boolnew` "required" false "hint" "Esto desplaza el divisor desde la parte inferior de la sección actual hacia la parte superior de la sección siguiente" -}}


{{/*  DATA MENU  */}}

{{- $menu_item_fields := slice
  $button_link
  $icon_id
  $button_label
  $button_anchor
  $button_ofuscate
  $button_font_alt
  $button_color
  (dict
    "label"          `Subelementos`
    "label_singular" `Subelemento`
    "name"           `items`
    "widget"         `list`
    "collapsed"      true
    "summary"        "Subelemento: {{fields.label}}"
    "allow_add"      true
    "required"       false
    "fields"         (slice
      $button_link
      $icon_id
      $button_label
      $button_anchor
      $button_ofuscate
      $button_font_alt
      $button_color
    )
  )
-}}
{{- $menu_items_normal  := dict "label" `Elementos Manuales Normales`     "name" `normal` "label_singular" `Elemento` "widget" `list` "collapsed" true "summary" "Elemento: {{fields.label}}" "allow_add" true "required" false "fields" $menu_item_fields "hint" "Éstos elementos aparecerán en todos los menús" -}}
{{- $menu_items_more    := dict "label" `Elementos Manuales al Desplegar` "name" `more`   "label_singular" `Elemento` "widget" `list` "collapsed" true "summary" "Elemento: {{fields.label}}" "allow_add" true "required" false "fields" $menu_item_fields "hint" "Éstos elementos aparecerán en todos los menús como subelementos desplegables en 'Más'" -}}
{{- $menu_items_callnow :=
  (dict
    "label"          `Botones Esquina`
    "label_singular" `Botón Esquina`
    "name"           `callnow_buttons`
    "widget"         `list`
    "summary"        "Botón Esquina: {{fields.label}}"
    "collapsed"      true
    "allow_add"      true
    "required"       false
    "types"     (slice
      (dict "label" `Teléfono` "name" `phone`    "widget" `object` "fields" (slice $contact_label_phone $button_color $icon_id))
      (dict "label" `WhatsApp` "name" `whatsapp` "widget" `object` "fields" (slice $contact_label_phone $button_color))
      (dict
        "label"  `Personalizado`
        "name"   `custom`
        "widget" `object`
        "fields" (slice
          $button_link
          $icon_id
          $contact_label
          $button_ofuscate
          $button_color_without_none
          $button_ga4
        )
      )
    )
  )
-}}


{{/*  DATA ARTICLES COMMON  */}}

{{- $data_articles_common := dict
  "label"     `📄 Listas`
  "name"      `common`
  "widget"    `object`
  "collapsed" true
  "fields"    (slice
           $container_size
           $columns_num
    (merge $columns_num_xs      (dict "widget" `boolean` "required" true))
           $columns_gap
           $title_size
    (merge $uppercase           (dict "widget" `boolean` "required" true))
    (merge $underline           (dict "widget" `boolean` "required" true))
           $icon_id
           $icon_type
           $icon_size
           $icon_color
           $image_src
           $image_src_hover
           $image_ratio
    (merge $image_contain       (dict "widget" `boolean` "required" true))
           $image_border
    (merge $image_inset         (dict "widget" `boolean` "required" true))
    (merge $image_grayscale     (dict "widget" `boolean` "required" true))
           $align
           $align_y
           $align_x
           $columns_padding
           $color
           $gradient_color
           $gradient_type
           $color_opacity
    (merge $pill                (dict "widget" `boolean` "required" true))
    (merge $card                (dict "widget" `boolean` "required" true))
    (merge $hide_shadow         (dict "widget" `boolean` "required" true))
    (merge $hide_description    (dict "widget" `boolean` "required" true))
    (merge $hide_categories     (dict "widget" `boolean` "required" true))
    (merge $reading_time        (dict "widget" `boolean` "required" true))
           $button_licon
           $button_label
           $button_color_with_hide
    (merge $button_font_alt     (dict "widget" `boolean` "required" true))
    (merge $slider_active       (dict "widget" `boolean` "required" true))
           $slider_interval
    (merge $slider_hide_bullets (dict "widget" `boolean` "required" true))
    (merge $slider_hide_arrows  (dict "widget" `boolean` "required" true))
  )
-}}


{{/*  ARTICLES TYPE (MODEL)  */}}

{{- $options_tax := slice -}}
{{- if (.GetPage "pages"     ) }}{{ $options_tax = $options_tax | append (dict "value" "pages"      "label" "Páginas"       ) }}{{ end -}}
{{- if (.GetPage "page"      ) }}{{ $options_tax = $options_tax | append (dict "value" "page"       "label" "Seccionadas"   ) }}{{ end -}}
{{- if (.GetPage "blog"      ) }}{{ $options_tax = $options_tax | append (dict "value" "blog"       "label" "Blog"          ) }}{{ end -}}
{{- if (.GetPage "events"    ) }}{{ $options_tax = $options_tax | append (dict "value" "events"     "label" "Eventos"       ) }}{{ end -}}
{{- if (.GetPage "products"  ) }}{{ $options_tax = $options_tax | append (dict "value" "products"   "label" "Productos"     ) }}{{ end -}}
{{- if (.GetPage "categories") }}{{ $options_tax = $options_tax | append (dict "value" "categories" "label" "Categorías"    ) }}{{ end -}}
{{- if (.GetPage "tags"      ) }}{{ $options_tax = $options_tax | append (dict "value" "tags"       "label" "Etiquetas"     ) }}{{ end -}}
{{- if (.GetPage "authors"   ) }}{{ $options_tax = $options_tax | append (dict "value" "authors"    "label" "Autores"       ) }}{{ end -}}
{{- if (.GetPage "custom"    ) }}{{ $options_tax = $options_tax | append (dict "value" "custom"     "label" "Personalizadas") }}{{ end -}}

{{- $relation_categories := cond (not (.GetPage "categories")) "hidden" "relation" -}}
{{- $relation_tags       := cond (not (.GetPage "tags"      )) "hidden" "relation" -}}
{{- $relation_author     := cond (not (.GetPage "author"    )) "hidden" "relation" -}}


{{/*  SECTION ROWS  */}}

{{- $section_rows := dict
  "label"          `Filas`
  "label_singular" `Fila`
  "name"           `rows`
  "widget"         `list`
  "collapsed"      false
  "allow_add"      true
  "required"       false
  "types"          (slice
    (dict
      "label"     `Columnas`
      "name"      `columns`
      "widget"    `object`
      "collapsed" false
      "required"  false
      "fields"    (slice
        (dict
          "label"     `Diseño de Todas las Columnas`
          "name"      `design`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "fields"    (slice
            $columns_num
            $columns_num_xs
            $columns_gap
            $grow
            $icon_id
            $icon_type
            $icon_size
            $icon_color
            $image_src
            $image_src_hover
            $image_ratio
            $image_contain
            $image_border
            $image_inset
            $image_grayscale
            $button_link
            $button_licon
            $button_label
            $button_anchor
            $button_ofuscate
            $button_font_alt
            $button_color_with_hide
            $color
            $gradient_color
            $gradient_type
            $color_opacity
            $background_image
            $bg_opacity
            $parallax
            $pill
            $card
            $title_size
            $uppercase
            $underline
            $align
            $align_y
            $align_x
            $columns_padding
            $hide_shadow
            $hide_radius
            $group_radius
            $slider_active
            $slider_interval
            $slider_hide_bullets
            $slider_hide_arrows
          )
        )
        (dict
          "label"          `Columnas`
          "label_singular" `Columna`
          "name"           `items`
          "widget"         `list`
          "collapsed"      true
          "summary"        "Columna {{fields.title}}"
          "allow_add"      true
          "required"       false
          "fields"         (slice
            $title
            $subtitle
            $price
            $icon_id
            $image_src
            $background_image
            $button_link
            $button_label
            $button_anchor
            $columns_span
            $order
            $description
            (dict
              "label"     `Más`
              "name"      `more`
              "widget"    `object`
              "collapsed" true
              "required"  false
              "hint"      `Más opciones de la Columna`
              "fields"    (slice
                $icon_type
                $icon_size
                $icon_color
                $image_src_hover
                $image_ratio
                $image_contain
                $image_border
                $image_inset
                $image_grayscale
                $button_licon
                $button_ofuscate
                $button_font_alt
                $button_color_with_hide
                $color
                $gradient_color
                $gradient_type
                $color_opacity
                $bg_opacity
                $parallax
                $pill
                $card
                $title_size
                $uppercase
                $underline
                $align
                $align_y_self
                $align_xl
                $hide_radius
                $columns_padding
                $shadow
              )
            )
          )
        )
      )
    )
    (dict
      "label"     `Pasos`
      "name"      `steps`
      "widget"    `object`
      "collapsed" false
      "required"  false
      "fields"    (slice
        (dict
          "label"     `Diseño de Todos los Pasos`
          "name"      `design`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "fields"    (slice
            $border_color
            $icon_size
            $title_size
            $uppercase
            $underline
          )
        )
        (dict
          "label"          `Pasos`
          "label_singular" `Paso`
          "name"           `items`
          "widget"         `list`
          "collapsed"      true
          "summary"        "Paso: {{fields.title}}"
          "allow_add"      true
          "required"       false
          "fields"         (slice
            $title
            $subtitle
            $description
            $icon_id
            $image_no_video
          )
        )
      )
    )
    (dict
      "label"     `Galería`
      "name"      `gallery`
      "widget"    `object`
      "collapsed" false
      "required"  false
      "fields"    (slice
        (dict
          "label"     `Diseño de Galería`
          "name"      `design`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "fields"    (slice
            $gallery_max
            $gallery_columns
            $gallery_alt
            $gallery_wrap
            $gallery_gap
            $gallery_cover
            $image_grayscale
            $button_link
            $icon_id
            $button_label
            $button_anchor
            $button_ofuscate
            $button_font_alt
            $button_color_with_hide
          )
        )
        $gallery_images
        (dict
          "label"          `Imágenes con Enlaces`
          "label_singular" `Imágen`
          "name"           `items`
          "widget"         `list`
          "collapsed"      true
          "summary"        "Imagen: {{fields.image}}"
          "allow_add"      true
          "required"       false
          "fields"         (slice
            $image_no_video
            $button_link
          )
        )
      )
    )
    (dict
      "label"     `Artículos`
      "name"      `articles`
      "widget"    `object`
      "collapsed" false
      "required"  false
      "hint"      "Lista de artículos (entradas del blog, productos, categorías…)"
      "fields"    (slice
        (dict "label" `Tipo de Artículo`           "name" `kind`       "widget" `select`               "required" false "options" $options_tax)
        (dict "label" `Categorías`                 "name" `categories` "widget" $relation_categories   "required" false "options_length" 100 "collection" (print `categories.` .Lang) "value_field" "{{slug}}" "search_fields" (slice "{{title}}") "display_fields" (slice "{{title}}") "multiple" true "hint" "Filtro por categorías previamente creadas")
        (dict "label" `Etiquetas`                  "name" `tags`       "widget" $relation_tags         "required" false "options_length" 100 "collection" (print `tags.` .Lang)       "value_field" "{{slug}}" "search_fields" (slice "{{title}}") "display_fields" (slice "{{title}}") "multiple" true "hint" "Filtro por etiquetas previamente creadas")
        (dict "label" `Autor`                      "name" `author`     "widget" $relation_author       "required" false "options_length" 100 "collection" (print `authors.` .Lang)    "value_field" "{{slug}}" "search_fields" (slice "{{title}}") "display_fields" (slice "{{title}}") "multiple" true "hint" "Filtro por autores previamente creados")
        (dict "label" `Número Máximo de Elementos` "name" `max`        "widget" `number`               "required" false "value_type" `int` "min" 1 "hint" "Número máximo de elementos visibles, para ver el resto aparecerá un botón '+ Más' que llevará al Tipo de Artículo")
        (dict
          "label"     `Diseño de Artículos`
          "name"      `design`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "fields"    (slice
            $columns_num
            $columns_num_xs
            $columns_gap
            $title_size
            $uppercase
            $underline
            $icon_id
            $icon_type
            $icon_size
            $icon_color
            $image_src
            $image_src_hover
            $image_ratio
            $image_contain
            $image_border
            $image_inset
            $image_grayscale
            $align
            $align_y
            $align_x
            $columns_padding
            $color
            $gradient_color
            $gradient_type
            $color_opacity
            $pill
            $card
            $hide_shadow
            $hide_description
            $hide_categories
            $reading_time
            $button_licon
            $button_label
            $button_color_with_hide
            $button_font_alt
            $slider_active
            $slider_interval
            $slider_hide_bullets
            $slider_hide_arrows
          )
        )
      )
    )
    (dict
      "label"     `Desplegables`
      "name"      `collapsible`
      "widget"    `object`
      "collapsed" false
      "required"  false
      "fields"    (slice
        (dict
          "label"     `Diseño de Todos los Botones`
          "name"      `design`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "fields"    (slice
            $button_color
            $button_font_alt
            $icon_id
          )
        )
        (dict
          "label"          `Desplegables`
          "label_singular" `Desplegable`
          "name"           `items`
          "widget"         `list`
          "collapsed"      false
          "summary"        "Desplegable: {{fields.title}}"
          "allow_add"      true
          "required"       false
          "hint"           "El ejemplo más claro de uso es el de preguntas frecuentes"
          "fields"         (slice
            $icon_id
            $title_required
            $description_required
          )
        )
      )
    )
    (dict
      "label"     `Reseñas`
      "name"      `reviews`
      "widget"    `object`
      "collapsed" false
      "required"  false
      "fields"    (slice
        (dict
          "label"     `Diseño de las Reseñas`
          "name"      `design`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "fields"    (slice
            $columns_num
            $columns_num_xs
            $color
            $gradient_color
            $gradient_type
            $opacity
            $hide_shadow
            $slider_active
            $slider_interval
            $slider_hide_bullets
            $slider_hide_arrows
            (merge $icon_id (dict "label" `Icono Izquierda` "name" `icon`))
            (merge $icon_id (dict "label" `Icono Derecha`   "name" `icon_right`))
          )
        )
        (dict
          "label"          `Reseñas`
          "label_singular" `Reseña`
          "name"           `items`
          "widget"         `list`
          "collapsed"      false
          "summary"        "Reseña: {{fields.title}}"
          "allow_add"      true
          "required"       false
          "fields"         (slice
            $title
            $subtitle
            $image_no_video
            $description_required
          )
        )
      )
    )
    (dict
      "label"     `Contacto`
      "name"      `contact`
      "widget"    `object`
      "collapsed" false
      "required"  false
      "fields"    (slice
        (dict
          "label"          `Datos`
          "label_singular" `Dato`
          "name"           `data`
          "widget"         `list`
          "summary"        "{{fields.label}} {{fields.streetAddress}} {{fields.days}} {{fields.hours}}"
          "collapsed"      true
          "allow_add"      true
          "required"       false
          "hint"           "Datos de contacto que se verá como botones, enlaces, o textos"
          "types"          (slice
            (dict     "label" `Horario de Contacto` "name" `schedule` "widget" `object` "hint" "Días de la Semana y Horas de cada Día" "fields"
              (slice
                (dict "label" `Días`  "name" `days` "widget" `string`)
                (dict "label" `Horas` "name" `hours` "widget" `string`)
                $contact_full
              )
            )
            (dict "label" `Teléfono`            "name" `phone`    "widget" `object` "required" false "fields" (slice $contact_label $contact_full $button_color $button_font_alt $icon_id))
            (dict "label" `WhatsApp`            "name" `whatsapp` "widget" `object` "required" false "fields" (slice $contact_label $contact_full $button_color $button_font_alt))
            (dict "label" `eMail`               "name" `mail`     "widget" `object` "required" false "fields" (slice $contact_label $contact_full $button_color $button_font_alt))
            (dict "label" `Dirección`           "name" `address`  "widget" `object` "required" false "fields" ($contact_address_fields | append $contact_full $button_color $button_font_alt))
            (dict "label" `Encabezado h3`       "name" `h3`       "widget" `object` "required" false "fields" (slice $contact_label))
            (dict "label" `Encabezado h4`       "name" `h4`       "widget" `object` "required" false "fields" (slice $contact_label))
            (dict "label" `Encabezado h5`       "name" `h5`       "widget" `object` "required" false "fields" (slice $contact_label))
            (dict "label" `Encabezado h6`       "name" `h6`       "widget" `object` "required" false "fields" (slice $contact_label))
            (dict "label" `Salto de Línea`      "name" `br`       "widget" `object` "required" false "fields" (slice $contact_hidden))
            (dict "label" `Separador`           "name" `hr`       "widget" `object` "required" false "fields" (slice $contact_hidden))
            (dict
              "label"  `Personalizado`
              "name"   `custom`
              "widget" `object`
              "required"  false
              "fields" (slice
                $button_link
                $icon_id
                $contact_label
                $contact_full
                $button_anchor
                $button_ofuscate
                $button_color
                $button_font_alt
                $button_ga4
              )
            )
          )
        )
        (dict
          "label"     `Formulario`
          "name"      `form`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "fields"    (slice
            (dict "label" `Diseño Alternativo` "name" `fill_inputs` "widget" `boolnew` "required" false "hint" "Aplica un fondo de color blanco con esquinas redondeadas en cada campo simple")
            (dict "label" `Acción`             "name" `action`      "widget" `string`  "required" false "hint" "URL que ejecutará el formulario al enviarse (no recomendable tocar si no se sabe lo que se hace)")
            (dict
              "label"          `Campos`
              "label_singular" `Campo`
              "name"           `items`
              "widget"         `list`
              "summary"        "{{fields.name}}"
              "collapsed"      true
              "allow_add"      true
              "required"       false
              "hint"           "Excepto los campos múltiples y el de área de texto, se distribuyen en 2 columnas (a no ser que quede desparejo) dependiendo del ancho de la ventana"
              "types"      (slice
                (dict "label" `Texto (Simple)`         "name" `text`        "widget" `object` "required" false "fields" ($form_fields | append $contact_full)               "hint" "Campo simple de texto normal")
                (dict "label" `Email (Simple)`         "name" `email`       "widget" `object` "required" false "fields" ($form_fields | append $contact_full)               "hint" "Campo simple de email")
                (dict "label" `Teléfono (Simple)`      "name" `tel`         "widget" `object` "required" false "fields" ($form_fields | append $contact_full)               "hint" "Campo simple de teléfono")
                (dict "label" `Número (Simple)`        "name" `number`      "widget" `object` "required" false "fields" ($form_fields | append $contact_full)               "hint" "Campo simple de número")
                (dict "label" `Fecha (Simple)`         "name" `date`        "widget" `object` "required" false "fields" ($form_fields | append $contact_full)               "hint" "Campo simple de fecha")
                (dict "label" `Tiempo (Simple)`        "name" `time`        "widget" `object` "required" false "fields" ($form_fields | append $contact_full)               "hint" "Campo simple de tiempo")
                (dict "label" `Área de Texto (Simple)` "name" `textarea`    "widget" `object` "required" false "fields" $form_fields                                        "hint" "Campo simple de área de texto; Ocupa todo el ancho")
                (dict "label" `Selección (Múltiple)`   "name" `select`      "widget" `object` "required" false "fields" ($form_fields | append $contact_full $form_options) "hint" "Campo múltiple de lista de selección desplegable; Solo permite seleccionar una opción; Ocupa todo el ancho")
                (dict "label" `Radios (Múltiple)`      "name" `radio`       "widget" `object` "required" false "fields" ($form_fields | append $form_options)               "hint" "Campo múltiple de radios o círculos; Solo permite seleccionar una opción; Ocupa todo el ancho")
                (dict "label" `Casillas (Múltiple)`    "name" `checkbox`    "widget" `object` "required" false "fields" ($form_fields | append $form_options)               "hint" "Campo múltiple de casillas de verificación; Permite seleccionar múltiples opciones; Ocupa todo el ancho")
                (dict "label" `Archivo`                "name" `file`        "widget" `object` "required" false "fields" ($form_fields | append $form_accept)                "hint" "Campo de archivo adjunto (máximo 8 MB)")
                (dict "label" `Oculto`                 "name" `hidden`      "widget" `object` "required" false "fields" (slice $form_name)                                  "hint" "Campo simple oculto a los usuarios (puede servir para indicar algo internamente en la recepción de formularios)")
                (dict "label" `Encabezado h3`          "name" `h3`          "widget" `object` "required" false "fields" (slice (dict "label" `Título` "name" `name` "widget" `string`) $form_hint))
                (dict "label" `Encabezado h4`          "name" `h4`          "widget" `object` "required" false "fields" (slice (dict "label" `Título` "name" `name` "widget" `string`) $form_hint))
                (dict "label" `Encabezado h5`          "name" `h5`          "widget" `object` "required" false "fields" (slice (dict "label" `Título` "name" `name` "widget" `string`) $form_hint))
                (dict "label" `Encabezado h6`          "name" `h6`          "widget" `object` "required" false "fields" (slice (dict "label" `Título` "name" `name` "widget" `string`) $form_hint))
                (dict "label" `Descripción`            "name" `description` "widget" `object` "required" false "fields" (slice (dict "label" `Texto`  "name" `name` "widget" `markdown` "show_raw" true) | append $contact_full))
              )
            )
          )
        )
        (dict
          "label"     `Mapa`
          "name"      `map`
          "widget"    `object`
          "collapsed" true
          "requiered" false
          "fields"    (slice
            (dict "label" `Activo` "name" `active` "widget" `boolnew` "required" false)
            (dict "label" `Enlace` "name" `link`   "widget" `string`  "required" false "hint" "Enlace personalizado hacia mapa externo")
            (dict "label" `Iframe` "name" `iframe` "widget" `string`  "required" false "hint" "Iframe personalizado · Si no se especifica, se tomará la primera dirección del apartado 'localizaciones'")
            $divider_id
            $divider_flip_x
          )
        )
      )
    )
    (dict
      "label"     `Hoja de Google Drive`
      "name"      `gss`
      "widget"    `object`
      "collapsed" false
      "required"  false
      "fields"    (slice
        (dict "label" `Identificador del Archivo` "name" `id`       "widget" `string`)
        (dict "label" `Identificador de la Hoja`  "name" `id_sheet` "widget" `string`)
      )
    )
    | append (index site.Data "cms-custom-row" | default slice)
  )
-}}

{{/*  REDIRECTS OLD  */}}

{{- "" -}}
{{/*
{{- $redirects := (dict
  "file" `data/redirects.yml`
  "extension" `yml`
  "label" `Redirecciones`
  "name" `redirects`
  "fields" (slice
    (dict
      "label" `Redirecciones`
      "name" `items`
      "widget" `list`
      "collapsed" true
      "summary" "{{fields.from}} {{fields.to}} {{fields.type}}"
      "allow_add" true
      "required"       false
      "hint" "Redirecciones de URL's. Cada origen mostrará su destino correspondiente según el tipo. [Más info](https://docs.netlify.com/routing/redirects/redirect-options/)."
      "fields" (slice
        (dict
          "label" `Origen` "name" `from` "widget" `string`
          "hint" "Se permiten asteriscos '*' como conjunto de caraceres que pueden ser reemplazados en el destino mediante ':splat'"
        )
        (dict "label" `Destino` "name" `to` "widget" `string` "required" false
          "hint" "Por defecto a la raíz '/' excepto si es 404 (/404.html)"
        )
        (dict
          "label" `Tipo` "name" `type` "widget" `select` "required" false
          "options" (slice
            (dict "label" `301 Redirección Permanente` "value" 301)
            (dict "label" `302 Redirección Temporal` "value" 302)
            (dict "label" `404 No Existe` "value" 404)
            (dict "label" `202 Se Encontró` "value" 301)
          )
          "hint" "301 por defecto"
        )
      )
    )
  )
) -}}
*/}}
{{- "" -}}


{{/*  CONFIG FIELDS ==============================================================================  */}}

{{- $config_fields := slice
  (dict "label" `URL Base`                 "name" `baseURL`     "widget" `hidden` "required" false)
  (dict "label" `Artículos por Paginación` "name" `Paginate`    "widget" `hidden` "required" false "min" 2 "value_type" `int` "deafult" 24)
  (dict "label" `Mostrar Noticias Futuras` "name" `buildFuture` "widget" `hidden` "required" false "deafult" false "hint" "Mostrar noticias con fechas futuras a la actual")
  (dict "label" `Tema`                     "name" `theme`       "widget" `hidden` "required" false "default" (slice `sansoul`))
  (dict
    "label"     `Parámetros Generales`
    "name"      `params`
    "widget"    `hidden`
    "collapsed" true
    "fields"    (slice
      (dict "label" `URL del proyecto en GitLab, GitHub u otro` "name" `git_url`      "widget" `hidden` "required" false)
      (dict "label" `Nombre de Proyecto de Netlify`             "name" `netlify_name` "widget" `hidden` "required" false)
      (dict "label" `ID de Proyecto de Netlify`                 "name" `netlify_id`   "widget" `hidden` "required" false)
      (dict "label" `Enlace a Datos de Acceso`                  "name" `drive_link`   "widget" `hidden` "required" false)
    )
  )
-}}
{{- $data_config_fields := slice
  (dict "label" `Título`                  "name" `title`                    "widget" `string`  "required" false)
  (dict "label" `Descripción`             "name" `description`              "widget" `text`    "required" false )
  (dict "label" `Logo`                    "name" `logo`                     "widget" `image`   "required" false "default" `logo.png` "max_file_size" 512000000)
  (dict "label" `Nombre Legal`            "name" `legal_name`               "widget" `string`  "required" false "hint" "Para aviso legal")
  (dict "label" `DNI / CIF`               "name" `legal_dni`                "widget" `string`  "required" false "hint" "Para aviso legal")
  (dict "label" `Email`                   "name" `legal_email`              "widget" `string`  "required" false)
  (dict "label" `Ubicación`               "name" `legal_location`           "widget" `string`  "required" false)
  (dict "label" `País`                    "name" `country`                  "widget" `select`  "required" false "options" (index $options.countries .Lang) "default" `España`)
  (dict
    "label"          `Tipo de Negocio`
    "label_singular" `Tipo`
    "name"           `location_type`
    "widget"         `list`
    "collapsed"      true
    "summary"        "Tipo: {{fields.type}}"
    "allow_add"      true
    "required"       false
    "hint"           "Para datos estructurados · Se pueden añadir más de uno"
    "fields"         (slice
      (dict "label" `Tipo`      "name" `type`                               "widget" `select`  "required" false "options" $options.location_type)
    )
  )
  (dict
    "label"          `Títulos o Nombres Alternativos`
    "label_singular" `Título/Nombre`
    "name"           `alternate_name`
    "widget"         `list`
    "collapsed"      true
    "summary"        "Título/Nombre: {{fields.name}}"
    "allow_add"      true
    "required"       false
    "hint"           "Para datos estructurados"
    "fields"         (slice
      (dict "label" `Nombre`    "name" `name`                               "widget" `string`  "required" false)
    )
  )
  (dict "label" `Rango de Precios`        "name" `price_range`              "widget" `select`  "required" false "hint" "Para datos estructurados" "options" (slice "€" "€€" "€€€" "$" "$$" "$$$"))
  (dict "label" `Código Analytics`        "name" `google_analytics`         "widget" `string`  "required" false "hint" "Código de seguimiento de Google Analytics: UA-XXXXXXXX-X ; G-XXXXXXXXXX")
  (dict "label" `Código Search Console`   "name" `google_site_verification` "widget" `string`  "required" false "hint" "Código de Verificación de Google Search Console")
  (dict "label" `Archivo Search Console`  "name" `google_file_verification` "widget" `string`  "required" false "hint" "Nombre de Archivo de Verificación de Google Search Console · Ejemplo: google7467d923cbb3eb4c.html")
  (dict "label" `Disqus`                  "name" `disqus`                   "widget" `string`  "required" false "hint" "Nombre corto del sistema de comentarios disqus.com")
  (dict "label" `Cookies Legal`           "name" `cookies_legal`            "widget" `boolean`                  "hint" "Hace que se aplique la ley realmente a nivel técnico")
  (dict "label" `Analytics PageSpeed`     "name" `analytics_pagespeed`      "widget" `hidden`                   "default" true)
  (dict "label" `Procesar todas las imágenes` "name" `process_all_images`   "widget" `hidden`                   "default" false)
  (dict "label" `CMS`                     "name" `cms`                      "widget" `hidden`                   "default" true)
  (dict "label" `CMS con Flujo Editorial` "name" `cms_editorial_workflow`   "widget" `boolean`                  "hint" "Permite trabajar con vistas previas en modo desarrollo sin afectar al contenido en producción (hasta que se publiquen los cambios)")
  (dict "label" `Modo Desarrollo`         "name" `development`              "widget" `boolean`                  "hint" "Aplica los cambios más rápido en producción, pero empeora el rendimiento para los usuarios")
  (dict
    "label"     `Códigos Personalizados`
    "name"      `custom_code`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `HTML antes de </head>` "name" `html_head` "widget" `code` "required" false "default_language" `html`      )
      (dict "label" `HTML antes de </body>` "name" `html_body` "widget" `code` "required" false "default_language" `html`      )
      (dict "label" `CSS`                   "name" `css`       "widget" `code` "required" false "default_language" `css`       )
      (dict "label" `Javascript`            "name" `js`        "widget" `code` "required" false "default_language" `javascript`)
    )
  )
  (dict
    "label"          `Redes Sociales`
    "label_singular" `Enlace`
    "name"           `social`
    "widget"         `list`
    "collapsed"      false
    "summary"        "{{fields.link}}"
    "allow_add"      true
    "required"       false
    "hint"           "Enlaces hacia redes sociales en el pie de página"
    "fields"         (slice
      $button_link
      $icon_id
    )
  )
-}}
{{- $data_design_fields := slice
  (dict
    "label"     `Iconos`
    "name"      `icons`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `Tipo de Iconos` "name" `type`   "widget" `select` "required" false "options" $options.icons.type "default" `solid`)
      (dict "label" `Tipo de Emojis` "name" `emojis` "widget" `select` "required" false "options" $options.icons.emojis)
    )
  )
  (dict
    "label"     `Fuentes`
    "name"      `fonts`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `Google Fonts`      "name" `google`             "widget" `boolean` "default" true  "hint" "Activar Fuentes de Google")
      (dict "label" `Fuente Base`       "name" `base`    | merge $font)
      (dict "label" `Manuscrita`        "name" `cursive` | merge $font_top)
      (dict "label" `Títulos`           "name" `title`   | merge $font_top)
      (dict "label" `Citas Manuscritas` "name" `blockquote_cursive` "widget" `boolean` "default" false "hint" "Citas con Fuente Manuscrita ; Desactivadas se usará 'Times New Roman' cursiva")
    )
  )
  (dict
    "label"     `Colores`
    "name"      `colors`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `Principal`   "name" `main` | merge $base_color)
      (dict "label" `Alternativo` "name" `alt`  "hint" "Usado para subtítulos, bordes y como seleccionable" | merge $base_color)
      (dict "label" `Enlaces`     "name" `link` "hint" "Color para los enlaces y botones por defecto · Si no se especifica, se considerará igual que el principal" | merge $base_color)
      (dict
        "label"     `Base`
        "name"      `base`
        "widget"    `object`
        "collapsed" false
        "fields"    (slice
          (dict "label" `Blanco` "name" `white` "widget" `color` "required" false "allow_input" true "default" `#fff`)
          (dict "label" `Claro`  "name" `light` "widget" `color` "required" false "allow_input" true "default" `#eee`)
          (dict "label" `Gris`   "name" `grey`  "widget" `color` "required" false "allow_input" true "default" `#767676`)
          (dict "label" `Oscuro` "name" `dark`  "widget" `color` "required" false "allow_input" true "default" `#282525`)
          (dict "label" `Negro`  "name" `black` "widget" `color` "required" false "allow_input" true "default" `#000`)
        )
      )
    )
  )
  (dict
    "label"     `Esquinas Redondeadas`
    "name"      `rounded`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `Radio`   "name" `radius`  "widget" `number`  "default"  0 "value_type" `float` "step" 0.01 "min" 0 "max" 1.25 "hint" "Éste radio se aplica a las esquinas en general, pero se le suma margen interno si a su vez envuelve a otro elemento con esquinas redondeadas; Si el valor es 0 no se redondea nada; Si el valor es 0.01 solamente se redondean los que envuelven otras esquinas; Máximo 1.25")
      (dict "label" `Chaflán` "name" `chamfer` "widget" `boolean` "default"  false                                                 "hint" "Cambia las esquinas redondeadas por chaflanes (cortes rectos)")
    )
  )
  (dict
    "label"     `Botones`
    "name"      `buttons`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `Laterales Redondos` "name" `sides_round` "widget" `boolean` "default" false "hint" "Redondea las esquinas hasta el máximo")
      (dict "label" `Iconos Círculares`  "name" `icon_circle` "widget" `boolean` "default" false "hint" "Redondea las esquinas hasta convertir en círculos los que solamente tienen un icono grande")
      (dict "label" `3D`                 "name" `deep`        "widget" `boolean` "default" false "hint" "Efecto 3D o de profundidad")
      (dict "label" `Borde y Hueco`      "name" `outline`     "widget" `boolean` "default" false "hint" "Deja bordes sólidos y rellenos transparente")
      (dict "label" `Fuente Base`        "name" `font_base`   "widget" `boolean` "default" false "hint" "Marcada toma la fuente base, negrita si está disponible · Desmarcada se toma la fuente de títulos")
    )
  )
  (dict
    "label"     `Sombras`
    "name"      `shadow`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `Posición Horizontal` "name" `left`    "widget" `number` "value_type" `float` "step" 0.05 "min" -1 "max" 1 "default" 0.25 "default" 0)
      (dict "label" `Posición Vertical`   "name" `top`     "widget" `number` "value_type" `float` "step" 0.05 "min" -1 "max" 1 "default" 0.25 "default" 0)
      (dict "label" `Difuminado`          "name" `blur`    "widget" `number` "value_type" `float` "step" 0.05 "min" 0  "max" 1 "default" 0.25 "default" 0)
      (merge $color (dict "label" `Color`))
      (dict "label" `Opacidad`            "name" `opacity` "widget" `number` "value_type" `float` "step" 0.05 "min" 0  "max" 1 "default" 0.25 "default" 0)
    )
  )
  (dict
    "label"     `Fondo de Diapositivas`
    "name"      `lightbox_overlay`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `Opacidad` "name" `opacity` "widget" `number` "value_type" `float` "step" 0.05 "min" 0 "max" 1 "default" 0.8)
      $color
    )
  )
  (dict
    "label"     `Rendimiento`
    "name"      `performance`
    "widget"    `object`
    "collapsed" true
    "hint"      "Desactivar cada opción mejora el rendimiento (considerable para dispositivos poco potentes)"
    "fields" (slice
      (dict "label" `Aparecer` "name" `showup`   "widget" `boolean` "default" false "hint" "Efecto de aparecer al hacer scroll en todos los elementos")
      (dict "label" `Parallax` "name" `parallax` "widget" `boolean` "default" false "hint" "Cambia los efectos de fondo fijado por desplazamientos suaves al hacer scroll")
    )
  )
-}}
{{- $data_menu_fields := slice
  $menu_items_callnow
  $menu_items_normal
  $menu_items_more
-}}
{{- $sections_design_fields := slice
  $icon_id
  $icon_type
  $icon_size
  $icon_color
  $image_src
  $image_ratio
  $image_contain
  $image_border
  $image_inset
  $section_image_min
  $section_image_max
  $section_image_align
  $uppercase
  $underline
  $align
  $section_full_screen
  $padding_hide
  $padding_top
  $padding_bottom
  $color
  $gradient_color
  $gradient_type
  $background_image
  $bg_opacity
  $parallax
  $pill
  $container_size
  $container_color
  $container_gradient_color
  $container_gradient_type
  $container_opacity
  $hide_shadow
  $divider_id
  $divider_flip_x
  $divider_flip_y
-}}
{{- $modals_design_fields := slice
  $icon_id
  $icon_type
  $icon_size
  $icon_color
  $image_src
  $image_ratio
  $image_contain
  $image_border
  $image_inset
  $section_image_min
  $section_image_max
  $section_image_align
  $uppercase
  $underline
  $align
  $color
  $gradient_color
  $gradient_type
  $pill
  $container_size
-}}
{{- $sections_design_general   := dict "label" `Diseño General de Secciones`  "name" `general`   "widget" `object` "collapsed" true "required" false "fields" $sections_design_fields -}}
{{- $sections_design_alternate := dict "label" `Diseño de Secciones Alternas` "name" `alternate` "widget" `list`   "collapsed" true "required" false "fields" $sections_design_fields "label_singular" `Sección` "summary" "{{fields.color}} {{fields.divider}}" "allow_add" true "required" false "hint" "Ejemplo: si hay 1 diseño, se alternarán entre las secciones pares; si hay 2, se alternarán cada 3 (el 1º se toma del general)…" -}}
{{- $sections_design_modals    := dict "label" `Diseño de Modales`            "name" `modals`    "widget" `object` "collapsed" true "required" false "fields" $modals_design_fields -}}
{{- $data_sections_fields      := slice
  $sections_design_general
  $sections_design_alternate
-}}
{{- $data_articles_fields := slice
  (dict
    "label"     `General`
    "name"      `general`
    "widget"    `object`
    "collapsed" true
    "fields"    (slice
      (dict "label" `Logo`      "name" `logo`     "widget" `image`  "required" false "max_file_size" 512000000 "choose_url" true)
      (dict "label" `Título`    "name" `title`    "widget" `string` "required" false)
      (dict "label" `Subtítulo` "name" `subtitle` "widget" `string` "required" false)
      (merge $uppercase    (dict "widget" `boolean` "required" true))
      (merge $underline    (dict "widget" `boolean` "required" true))
      $align
      (dict "label" `Color de Fondo de Artículos`   "name" `color`           "widget" `select`  "required" false "options" $options.color_bg "default" `light`)
      (dict "label" `Color de Fondo de los Índices` "name" `toc_color`       "widget" `select`  "required" false "options" $options.color_bg "default" `white`)
      (merge $image_border (dict "label"  `Bordes en imágenes`))
      (merge $reading_time (dict "widget" `boolean` "required" true))
    )
  )
  $data_articles_common
  (merge $data_articles_common (dict "label" `📰 Listas tipo Blog`           "name" `blog`))
  (merge $data_articles_common (dict "label" `📅 Listas tipo Eventos`        "name" `events`))
  (merge $data_articles_common (dict "label" `📦 Listas tipo Productos`      "name" `products`))
  (merge $data_articles_common (dict "label" `🏷 Listas tipo Taxonomías`     "name" `taxonomies`))
  (merge $data_articles_common (dict "label" `*️⃣ Listas tipo Presonalizadas` "name" `custom`))
-}}

{{/*  IF MULTILANGUAJE  */}}

{{- if .IsTranslated -}}
  {{- $languages_config_fields := slice -}}
  {{- $languages_menu_fields   := slice -}}
  {{- range .AllTranslations -}}

    {{- $flag := cond .IsTranslated (print .Site.Params.flag " ") "" -}}

    {{- $languages_config_fields = $languages_config_fields | append (dict
      "label"     (print $flag .Language.LanguageName)
      "name"      .Lang
      "widget"    `object`
      "collapsed" true
      "required"  false
      "hint"      "Para los valores sin editar, se tomarán los generales."
      "fields"    $data_config_fields
    ) -}}
    {{- $languages_menu_fields = $languages_menu_fields | append (dict
      "label"     (print $flag .Language.LanguageName)
      "name"      .Lang
      "widget"    `object`
      "collapsed" true
      "required"  false
      "hint"      "Para los valores sin editar, se tomarán los generales."
      "fields"    $data_menu_fields
    ) -}}

  {{- end -}}
  {{- $data_config_fields = $data_config_fields | append $languages_config_fields -}}
  {{- $data_menu_fields   = $data_menu_fields   | append $languages_menu_fields -}}
{{- end -}}

{{- $languajes_permalinks := slice -}}
{{- $colections_langs     := slice -}}
{{- range slice . | append .Translations -}}

  {{- $languajes_permalinks = $languajes_permalinks | append (partial "cms/config/languajes-permalinks" .) -}}

  {{/*  MAIN PAGES ELEMENTS  */}}
  {{- $p_title          := dict "label" `Título`             "name" `title`       "widget" `string`   "i18n" true                                              "hint" "Ejemplo: 'Día de paseo por el nuevo barrio'" -}}
  {{- $p_title_seo      := dict "label" `Título SEO`         "name" `title_seo`   "widget" `string`   "i18n" true        "required" false "default" ``         "hint" "**Recomendado entre 40 y 65 caracteres** (~60) · Caracteres llamativos permitidos por Google: 【】 ® © ▷ ᐅ ◁ ✆ ⊛ « » ‹ › ✔" -}}
  {{- $p_slug           := dict "label" `Slug`               "name" `slug`        "widget" `string`   "i18n" true                                              "hint" "Es el final de la URL o enlace de ésta página · Debe ser único (no repetirse) entre todas las páginas, corto, descriptivo y sin palabras irrelevantes (de, por, para, el…) · **Ejemplo:** para el título '*Paseo por el Nuevo Barrio por la Mañana*' puede quedar el slug '*paseo-nuevo-barrio-manana*'" "pattern" (slice "^[a-z-)+$" `En minúsculas · Sin espacios (guiones medios en su lugar) · Sin eñes (enes en su lugar) · Sin caracteres extraños ni barras bajas`) -}}
  {{- $p_price          := merge $price (dict "default" ``) -}}
  {{- $p_description    := dict "label" `Resumen`            "name" `description` "widget" `text`     "i18n" true        "required" false "default" ``         "hint" "Se utiliza para las miniaturas de las listas y para los resultados de búsqueda en Google · **Recomendado entre 70 y 155 caracteres** (~135) · Caracteres llamativos permitidos por Google: llll➤ ✅ ✓ ✔ ✚ ☝️ ⚡ ✆ ® © ❤ ⬤ ✚ ➥" -}}
  {{- $p_image          := dict "label" `Imagen Principal`   "name" `image`       "widget" `image`    "i18n" `duplicate` "required" false "default" ``      "choose_url" true  "max_file_size" 512000000                                            "hint" "**Nombre de archivo con mismo formato que 'slug'** · Recomendado redimensionar ([editor online](https://photopea.com)) y comprimir ([compresor online](https://kraken.io)) antes de subir" -}}
  {{- $p_cat            := dict "label" `Categorías`         "name" `categories`  "widget" `relation` "i18n" `duplicate` "required" false "default" slice   "options_length" 100 "collection" (print `categories.` .Lang)        "value_field" "{{slug}}" "search_fields" (slice "{{title}}") "display_fields" (slice "{{title}}") "multiple" true "min" 1 "hint" (print "Indica una o varias [categorías previamente creadas](#/collections/categories." .Lang ")") -}}
  {{- $p_tag            := dict "label" `Etiquetas`          "name" `tags`        "widget" `relation` "i18n" `duplicate` "required" false "default" slice   "options_length" 100 "collection" (print `tags.` .Lang)              "value_field" "{{slug}}" "search_fields" (slice "{{title}}") "display_fields" (slice "{{title}}") "multiple" true         "hint" (print "Indica opcionalmente una o varias [etiquetas previamente creadas](#/collections/tags." .Lang ")") -}}
  {{- $p_aut            := dict "label" `Autor`              "name" `author`      "widget" `relation` "i18n" `duplicate` "required" false "default" ``      "options_length" 100 "collection" (print `authors.` .Lang)           "value_field" "{{slug}}" "search_fields" (slice "{{title}}") "display_fields" (slice "{{title}}") "multiple" false        "hint" (print "Indica un [autor previamente creado](#/collections/authors." .Lang ")") -}}
  {{- $p_toc            := dict "label" `Índice`             "name" `toc`         "widget" `boolean`  "i18n" `duplicate`                   "default" false      "hint" "Tabla de contenidos generada automáticamente mediante los encabezados del contenido" -}}
  {{- $p_draft          := dict "label" `Borrador`           "name" `draft`       "widget" `boolean`  "i18n" true                          "default" false      "hint" "Oculta la página" -}}
  {{- $p_noindex        := dict "label" `No Index`           "name" `noindex`     "widget" `boolean`  "i18n" true                          "default" false      "hint" "Evita que google indexe la página (recomendado marcar si todo el contenido está copiado de otra web)" -}}
  {{/*  {{- $p_date           := dict "label" `Fecha`              "name" `date`        "widget" `datetime` "i18n" true                                           "format" `yyyy-MM-dd`          "date_format" `yyyy-MM-dd`          "time_format" false -}}  */}}
  {{/*  {{- $p_lastmod        := dict "label" `Última Modifiación` "name" `lastmod`     "widget" `datetime` "i18n" true        "required" false "default" ``      "format" `yyyy-MM-dd`          "date_format" `yyyy-MM-dd`          "time_format" false    "hint" "Si no se indica nada, se tomará la fecha de modificación del archivo" -}}  */}}
  {{/*  {{- $p_date_ini       := dict "label" `Fecha Inicial`      "name" `date_ini`    "widget" `datetime` "i18n" `duplicate`                                    "format" `yyyy-MM-ddTHH:mm:ss` "date_format" `yyyy-MM-ddTHH:mm:ss` "time_format" true -}}  */}}
  {{/*  {{- $p_date_end       := dict "label" `Fecha Final`        "name" `date_end`    "widget" `datetime` "i18n" `duplicate` "required" false "default" ``      "format" `yyyy-MM-ddTHH:mm:ss` "date_format" `yyyy-MM-ddTHH:mm:ss` "time_format" true -}}  */}}
  {{- $p_date           := dict "label" `Fecha`              "name" `date`        "widget" `string`   "i18n" true                                           "hint" `Formato: 2024-12-31`          "date_format" `yyyy-MM-dd`          "pattern" (slice `^\d\d\d\d-\d\d-\d\d$`                `El formato debe ser yyyy-MM-dd`)          -}}
  {{- $p_lastmod        := dict "label" `Última Modifiación` "name" `lastmod`     "widget" `string`   "i18n" true        "required" false "default" ``      "hint" `Formato: 2024-12-31`          "date_format" `yyyy-MM-dd`          "pattern" (slice `^\d\d\d\d-\d\d-\d\d$`                `El formato debe ser yyyy-MM-dd`)          -}}
  {{- $p_date_ini       := dict "label" `Fecha Inicial`      "name" `date_ini`    "widget" `string`   "i18n" `duplicate`                                    "hint" `Formato: 2024-12-31T24:59:59` "date_format" `yyyy-MM-ddTHH:mm:ss` "pattern" (slice `^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d$` `El formato debe ser yyyy-MM-ddTHH:mm:ss`) -}}
  {{- $p_date_end       := dict "label" `Fecha Final`        "name" `date_end`    "widget" `string`   "i18n" `duplicate` "required" false "default" ``      "hint" `Formato: 2024-12-31T24:59:59` "date_format" `yyyy-MM-ddTHH:mm:ss` "pattern" (slice `^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d$` `El formato debe ser yyyy-MM-ddTHH:mm:ss`) -}}
  {{- $p_location       := dict "label" `Ubicación`          "name" `location`    "widget" `string`   "i18n" true        "required" false "default" ``          "hint" "Ejemplo: 'Sala B'" -}}
  {{- $p_address        := dict "label" `Dirección`          "name" `address`     "widget" `string`   "i18n" true        "required" false "default" ``          "hint" "Ejemplo: 'Av. Ciclista Mariano Rojas, 20, 30008 Murcia'" -}}
  {{- $p_body           := dict "label" `Contenido`          "name" `body`        "widget" `markdown` "i18n" true        "required" false "show_raw" true       "hint" (print "Los enlaces que empiecen por '**btn**' (opcionalmente seguido de '**-main**', '**-alt**', '**-light**', '**-dark**', '**-invert**', '**-font-alt**' o '**-icon**') se convertirán en botones · Se pueden usar iconos usando el texto '**icon-**' seguido de uno de los siguientes nombres válidos → " $fontawesome_link (cond (not site.Data.design.icons.emojis) " o emojis" "")) -}}
  {{- $p_translationKey := dict "label" `ID Traducción`      "name" `translationKey`                  "i18n" `duplicate` "required" false
    | merge (cond (not .IsTranslated)
      (dict "widget" `hidden`)
      (dict "widget" `string` "hint" "Identificador único de traducción para cada página correspondiente a cada idioma · **Ejemplo:** ID Traducción = '*i-invented-it*' exactamente igual en la misma página en español ('*Me lo invento*'), en inglés ('*I invented it*') y en francés ('*Je l'ai inventé*')")
    )
  -}}
  {{- $p_translationKey_hidden := dict "label" `ID Traducción` "name" `translationKey` "widget" `hidden` "required" false -}}

  {{- $flag := cond .IsTranslated (print .Site.Params.flag " ") "" -}}
  {{- $types_fields :=
    (slice
      $p_title
      $p_title_seo
      $p_description
      $p_image
      $p_draft
      $p_noindex
      $p_translationKey_hidden
      $p_body
    )
  -}}

  {{- $section_menu     := partial "cms/config/section-menu" (slice $menu_items_normal $menu_items_more) -}}
  {{- $section_sections := partial "cms/config/section-sections" . -}}

  {{- $lang := .Lang -}}
  {{- $types_files := slice -}}
  {{- range slice
    "pages"
    "blog"
    "events"
    "products"
    "categories"
    "tags"
    "authors"
    "custom"
  -}}
    {{- $types_files = $types_files | append (dict
      "file"      (print "content." $lang "/_index/" . ".md")
      "extension" `md`
      "label"     (print (index $taxonomies .).emoji " " (i18n .))
      "name"      (print "types-" .)
      "fields"    ($types_fields | append
        (cond (ne "custom" .)
          slice
          (dict
            "label"     `Plantilla`
            "name"      `template`
            "widget"    `object`
            "collapsed" true
            "required"  false
            "hint"      `Estas opciones y estructuras se aplicarán a cada una de las páginas personalizadas.`
            "fields"    (slice
              $section_header_article
              $section_menu
              $sections_design_general
              $sections_design_alternate
              $sections_design_modals
              $section_sections
            )
          )
        )
      )
      | merge (cond (ne "custom" .) dict (dict "hint" `Estas opciones y estructuras se aplicarán a cada una de las páginas personalizadas.`))
    ) -}}
  {{- end -}}

  {{- $colections_langs = $colections_langs | append
    (dict
      "label"           (print $flag `📚 Tipos`)
      "name"            (print `types-` .Lang)
      "description"     `Tipos de artículos que se pueden activar o desactivar marcándolos como borradores. El resto de contenido editable corresponde a cada artículo padre. IMPORTANTE: Artículos se consideran todos los tipos de páginas excepto las Seccionadas y sus Secciones y Modales correspondientes.`
      "sortable_fields" (dict "fields" slice)
      "editor"          (dict "preview" false)
      "files"           $types_files
    )
  -}}

  {{- $colections_langs = $colections_langs | append
    (dict
      "label"            (print $flag ($taxonomies.page.emoji) " " (i18n "page"))
      "label_singular"   (i18n "page" 1)
      "name"             (print `page-` .Lang)
      "description"      `Páginas maquetables por secciones.`
      "identifier_field" `slug`
      "folder"            (print `content.` .Lang)
      "create"            true
      "slug"             "{{fields.slug}}"
      "preview_path"      (print site.Home.RelPermalink "{{fields.slug}}/")
      "summary"           "{{title}}"
      "sortable_fields"   (dict "fields" (slice "commit_date" "title"))
      "view_filters"      (dict
        "filters" (slice
          (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
          (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
          (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
          (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
        )
      )
      "view_groups"       (dict
        "groups" (slice
          (dict "name" `year`      "label" `Año`        "field" `commit_date` "pattern" `^\d{4}`)
          (dict "name" `month`     "label" `Mes`        "field" `commit_date` "pattern" `^\d{4}-\d{2}`)
          (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
          (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
        )
      )
      "editor"            (dict "preview" false )
      "fields"            (slice
        $p_title
        $p_title_seo
        $p_slug
        $p_description
        $p_image
        $p_draft
        $p_noindex
        $p_translationKey
        $section_header_article
        $section_menu
        $sections_design_general
        $sections_design_alternate
        $sections_design_modals
        $section_sections
      )
    )
  -}}
  {{/*
    "nested"           (dict
      "depth"   100
      "summary" "{{title}}"
      "path"    (dict
        "widget"     `string`
        "index_file" `_index`
      )
    )
  */}}
  {{- $colections_langs = $colections_langs | append
    (dict
      "label"            (print $flag ($taxonomies.sections.emoji) " " (i18n "sections"))
      "label_singular"   (i18n "sections" 1)
      "name"             (print `sections-` .Lang)
      "description"      `Secciones asignadas a cada página. Es necesario crearlas aquí antes de poder asignarlas.`
      "identifier_field" `id`
      "extension"        `yml`
      "folder"           (print `content.` .Lang `/sections`)
      "create"           true
      "slug"             "{{fields.id}}"
      "summary"          "{{filename}}"
      "sortable_fields"  (dict "fields" (slice "commit_date" "slug" "id" "title"))
      "editor"           (dict "preview" false)
      "fields"           (slice
        $section_id
        $title
        $anchor
        $subtitle
        $icon_id
        $image_src
        $background_image
        $color
        $gradient_color
        $container_size
        $description
        (dict
          "label"     `Más`
          "name"      `more`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "hint"      `Más opciones de la Sección`
          "fields"    (slice
            (merge $button_label           (dict "label" `Texto del Enlace del Menú` "name" `menu`))
            (merge $button_color_with_hide (dict "label" `Color del Botón del Enlace del Menú`))
            (merge $button_font_alt        (dict "label" `Fuente Alternativa del Enlace del Menú`))
            $icon_type
            $icon_size
            $icon_color
            $image_ratio
            $image_contain
            $image_border
            $image_inset
            $section_image_min
            $section_image_max
            $section_image_align
            $gradient_type
            $opacity
            $parallax
            $uppercase
            $underline
            $align
            $section_full_screen
            $padding_hide
            $padding_top
            $padding_bottom
            $container_color
            $container_gradient_color
            $container_gradient_type
            $container_opacity
            $hide_shadow
            $pill
            $divider_id
            $divider_flip_x
            $divider_flip_y
          )
        )
        $section_rows
      )
    )
  -}}
  {{- $colections_langs = $colections_langs | append
    (dict
      "label"            (print $flag ($taxonomies.modals.emoji) " " (i18n "modals"))
      "label_singular"   (i18n "modals" 1)
      "name"             (print `modals-` .Lang)
      "description"      `Ventanas Modales asignadas a cada sección. Es necesario crearlas aquí antes de poder asignarlas. Están ocultas y hay que enlazarlas tipo ancla para que se desplieguen (con un '#' delante del ID, **ejemplo**: '#reparaciones-mantenimiento').`
      "identifier_field" `id`
      "extension"        `yml`
      "folder"           (print `content.` .Lang `/modals`)
      "create"           true
      "slug"             "{{fields.id}}"
      "summary"          "{{filename}}"
      "sortable_fields"  (dict "fields" (slice "commit_date" "slug" "id" "title"))
      "editor"           (dict "preview" false)
      "fields"           (slice
        $section_id
        $title
        $anchor
        $subtitle
        $icon_id
        $image_src
        $color
        $gradient_color
        $container_size
        $description
        (dict
          "label"     `Más`
          "name"      `more`
          "widget"    `object`
          "collapsed" true
          "required"  false
          "hint"      `Más opciones de la Ventana Modal`
          "fields"    (slice
            (merge $button_label           (dict "label" `Texto del Enlace del Menú` "name" `menu`))
            (merge $button_color_with_hide (dict "label" `Color del Botón del Enlace del Menú`))
            (merge $button_font_alt        (dict "label" `Fuente Alternativa del Enlace del Menú`))
            $icon_type
            $icon_size
            $icon_color
            $image_ratio
            $image_contain
            $image_border
            $image_inset
            $section_image_min
            $section_image_max
            $section_image_align
            $gradient_type
            $uppercase
            $underline
            $align
            $padding_hide
            $pill
          )
        )
        $section_rows
      )
    )
  -}}
  {{- if .GetPage "pages" -}}
    {{- $colections_langs = $colections_langs | append
      (dict
        "label"            (print $flag ($taxonomies.pages.emoji) " " (i18n "pages"))
        "label_singular"   (i18n "pages" 1)
        "name"             (print `pages-` .Lang)
        "description"      `Páginas básicas o normales (sin secciones).`
        "identifier_field" `slug`
        "folder"           (print `content.` .Lang `/pages`)
        "create"           true
        "slug"             "{{fields.slug}}"
        "preview_path"     (print site.Home.RelPermalink "{{fields.slug}}/")
        "summary"          "{{title}}"
        "sortable_fields"  (dict "fields" (slice "commit_date" "title"))
        "view_filters"     (dict
          "filters" (slice
            (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
            (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
          )
        )
        "view_groups"      (dict
          "groups" (slice
            (dict "name" `year`      "label" `Año`        "field" `commit_date` "pattern" `^\d{4}`)
            (dict "name" `month`     "label" `Mes`        "field" `commit_date` "pattern" `^\d{4}-\d{2}`)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
          )
        )
        "editor"           (dict "preview" false )
        "i18n"             true
        "fields"           (slice
          $p_title
          $p_title_seo
          $p_slug
          $p_description
          $p_image
          $p_toc
          $p_draft
          $p_noindex
          $p_translationKey
          $p_body
        )
      )
    -}}
  {{- end -}}
  {{- if .GetPage "blog" -}}
    {{- $colections_langs = $colections_langs | append
      (dict
        "label"            (print $flag ($taxonomies.blog.emoji) " " (i18n "blog"))
        "label_singular"   (i18n "blog" 1)
        "name"             (print `blog-` .Lang)
        "description"      `Entradas del blog, con fechas, categorias, etiquetas y autores asignados.`
        "identifier_field" `slug`
        "folder"           (print `content.` .Lang `/blog`)
        "create"           true
        "slug"             "{{year}}-{{month}}-{{day}}-{{fields.slug}}"
        "preview_path"     (print site.Home.RelPermalink "{{fields.slug}}/")
        "summary"          "{{date | date('YYYY-MM-DD')}} · {{title}}"
        "sortable_fields"  (dict "fields" (slice "date" "lastmod" "commit_date" "title" "authors" "categories" "tags"))
        "view_filters"     (dict
          "filters" (slice
            (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
            (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
          )
        )
        "view_groups"      (dict
          "groups" (slice
            (dict "name" `year`      "label" `Año`        "field" `date` "pattern" `^\d{4}`)
            (dict "name" `month`     "label" `Mes`        "field" `date` "pattern" `^\d{4}-\d{2}`)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
            (dict "name" `category`  "label" `Categoría`  "field" `categories`)
            (dict "name" `tag`       "label" `Etiqueta`   "field" `tags`)
            (dict "name" `author`    "label" `Autor`      "field" `author`)
          )
        )
        "editor"           (dict "preview" false)
        "fields"           (slice
          $p_title
          $p_title_seo
          $p_slug
          $p_description
          $p_image
          $p_cat
          $p_tag
          $p_aut
          $p_toc
          $p_draft
          $p_noindex
          $p_date
          $p_lastmod
          $p_translationKey
          $p_body
        )
      )
    -}}
  {{- end -}}
  {{- if .GetPage "events" -}}
    {{- $colections_langs = $colections_langs | append
      (dict
        "label"            (print $flag ($taxonomies.events.emoji) " " (i18n "events"))
        "label_singular"   (i18n "events" 1)
        "name"             (print `events-` .Lang)
        "description"      `Eventos con fechas de inicio y fin.`
        "identifier_field" `slug`
        "folder"           (print `content.` .Lang `/events`)
        "create"           true
        "slug"             "{{year}}-{{month}}-{{day}}-{{fields.slug}}"
        "preview_path"     (print ((index (.GetPage "events").Pages 0).Permalink | replaceRE (print .Site.BaseURL `(.+?/).+`) `/$1`) "{{date_ini | date('YYYY/MM/DD')}}/{{fields.slug}}/")
        "summary"          "{{date_ini}} · {{date_end}} · {{title}}"
        "sortable_fields"  (dict "fields" (slice "date_ini" "date_end" "commit_date" "title" "authors" "categories" "tags"))
        "view_filters"     (dict
          "filters" (slice
            (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
            (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
          )
        )
        "view_groups"      (dict
          "groups" (slice
            (dict "name" `year`      "label" `Año`        "field" `date_ini` "pattern" `^\d{4}`)
            (dict "name" `month`     "label" `Mes`        "field" `date_ini` "pattern" `^\d{4}-\d{2}`)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
            (dict "name" `category`  "label" `Categoría`  "field" `categories`)
            (dict "name" `tag`       "label" `Etiqueta`   "field" `tags`)
            (dict "name" `author`    "label" `Autor`      "field" `author`)
          )
        )
        "editor"           (dict "preview" false)
        "fields"           (slice
          $p_title
          $p_title_seo
          $p_slug
          $p_description
          $p_image
          $p_cat
          $p_tag
          $p_aut
          $p_toc
          $p_draft
          $p_noindex
          $p_date_ini
          $p_date_end
          $p_location
          $p_address
          $p_translationKey
          $p_body
        )
      )
    -}}
  {{- end -}}
  {{- if .GetPage "products" -}}
    {{- $colections_langs = $colections_langs | append
      (dict
        "label"            (print $flag ($taxonomies.products.emoji) " " (i18n "products"))
        "label_singular"   (i18n "products" 1)
        "name"             (print `products-` .Lang)
        "description"      `Productos con categorias, etiquetas y variaciones.`
        "identifier_field" `slug`
        "folder"           (print `content.` .Lang `/products`)
        "create"           true
        "slug"             "{{fields.slug}}"
        "preview_path"     (print site.Home.RelPermalink "{{fields.slug}}/")
        "summary"          "{{categories}} · {{title}}"
        "sortable_fields"  (dict "fields" (slice "commit_date" "title" "authors" "categories" "tags"))
        "view_filters"     (dict
          "filters" (slice
            (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
            (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
          )
        )
        "view_groups"      (dict
          "groups" (slice
            (dict "name" `year`      "label" `Año`        "field" `date` "pattern" `^\d{4}`)
            (dict "name" `month`     "label" `Mes`        "field" `date` "pattern" `^\d{4}-\d{2}`)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
            (dict "name" `category`  "label" `Categoría`  "field" `categories`)
            (dict "name" `tag`       "label" `Etiqueta`   "field" `tags`)
          )
        )
        "editor"           (dict "preview" false)
        "fields"           (slice
          $p_title
          $p_title_seo
          $p_slug
          $p_price
          $p_description
          $p_image
          $p_cat
          $p_tag
          $p_toc
          $p_draft
          $p_noindex
          $p_translationKey
          $p_body
        )
      )
    -}}
  {{- end -}}
  {{- if .GetPage "categories" -}}
    {{- $colections_langs = $colections_langs | append
      (dict
        "label"            (print $flag ($taxonomies.categories.emoji) " " (i18n "categories"))
        "label_singular"   (i18n "categories" 1)
        "name"             (print `categories-` .Lang)
        "description"      `Categorías asignadas a cada artículo. Es necesario crearlas aquí antes de poder asignarlas.`
        "identifier_field" `slug`
        "folder"           (print `content.` .Lang `/categories`)
        "create"           true
        "slug"             "{{fields.slug}}"
        "preview_path"     (print (((.GetPage "categories").GetPage "general").RelPermalink | replaceRE `^/(.+?/).+/$` `$1`) "{{fields.slug}}/")
        "summary"          "{{title}}"
        "sortable_fields"  (dict "fields" (slice "commit_date" "title"))
        "view_filters"     (dict
          "filters" (slice
            (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
            (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
          )
        )
        "view_groups"      (dict
          "groups" (slice
            (dict "name" `year`      "label" `Año`        "field" `commit_date` "pattern" `^\d{4}`)
            (dict "name" `month`     "label" `Mes`        "field" `commit_date` "pattern" `^\d{4}-\d{2}`)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
          )
        )
        "editor"           (dict "preview" false)
        "fields"           (slice
          $p_title
          $p_title_seo
          $p_slug
          $p_description
          $p_image
          $p_cat
          $p_tag
          $p_toc
          $p_draft
          $p_noindex
          $p_translationKey
          $p_body
        )
      )
    -}}
  {{- end -}}
  {{- if .GetPage "tags" -}}
    {{- $colections_langs = $colections_langs | append
      (dict
        "label"            (print $flag ($taxonomies.tags.emoji) " " (i18n "tags"))
        "label_singular"   (i18n "tags" 1)
        "name"             (print `tags-` .Lang)
        "description"      `Etiquetas asignadas a cada artículo. Es necesario crearlas aquí antes de poder asignarlas.`
        "identifier_field" `slug`
        "folder"           (print `content.` .Lang `/tags`)
        "create"           true
        "slug"             "{{fields.slug}}"
        "preview_path"     (print (((.GetPage "tags").GetPage "general").RelPermalink | replaceRE `^/(.+?/).+/$` `$1`) "{{fields.slug}}/")
        "summary"          "{{title}}"
        "sortable_fields"  (dict "fields" (slice "commit_date" "title"))
        "view_filters"     (dict
          "filters" (slice
            (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
            (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
          )
        )
        "view_groups"      (dict
          "groups" (slice
            (dict "name" `year`      "label" `Año`        "field" `commit_date` "pattern" `^\d{4}`)
            (dict "name" `month`     "label" `Mes`        "field" `commit_date` "pattern" `^\d{4}-\d{2}`)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
          )
        )
        "editor"           (dict "preview" false)
        "fields"           (slice
          $p_title
          $p_title_seo
          $p_slug
          $p_description
          $p_image
          $p_cat
          $p_tag
          $p_toc
          $p_draft
          $p_noindex
          $p_translationKey
          $p_body
        )
      )
    -}}
  {{- end -}}
  {{- if .GetPage "authors" -}}
    {{- $colections_langs = $colections_langs | append
      (dict
        "label"            (print $flag ($taxonomies.authors.emoji) " " (i18n "authors"))
        "label_singular"   (i18n "authors" 1)
        "name"             (print `authors-` .Lang)
        "description"      `Autores asignados a cada artículo. Es necesario crearlos aquí antes de poder asignarlos.`
        "identifier_field" `slug`
        "folder"           (print `content.` .Lang `/authors`)
        "create"           true
        "slug"             "{{fields.slug}}"
        "preview_path"     (print (((.GetPage "authors").GetPage "admin").RelPermalink | replaceRE `^/(.+?/).+/$` `$1`) "{{fields.slug}}/")
        "summary"          "{{title}}"
        "sortable_fields"  (dict "fields" (slice "commit_date" "title"))
        "view_filters"     (dict
          "filters" (slice
            (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
            (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
          )
        )
        "view_groups"      (dict
          "groups" (slice
            (dict "name" `year`      "label" `Año`        "field" `commit_date` "pattern" `^\d{4}`)
            (dict "name" `month`     "label" `Mes`        "field" `commit_date` "pattern" `^\d{4}-\d{2}`)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
          )
        )
        "editor"           (dict "preview" false)
        "fields"           (slice
          $p_title
          $p_title_seo
          $p_slug
          $p_description
          $p_image
          $p_toc
          $p_draft
          $p_noindex
          $p_translationKey
          $p_body
        )
      )
    -}}
  {{- end -}}
  {{- if .GetPage "custom" -}}
    {{- $colections_langs = $colections_langs | append
      (dict
        "label"            (print $flag ($taxonomies.custom.emoji) " " (i18n "custom"))
        "label_singular"   (i18n "custom" 1)
        "name"             (print `custom-` .Lang)
        "description"      `Páginas personalizadas por secciones.`
        "identifier_field" `slug`
        "folder"           (print `content.` .Lang `/custom`)
        "create"           true
        "slug"             "{{fields.slug}}"
        "preview_path"     (print site.Home.RelPermalink "{{fields.slug}}/")
        "summary"          "{{title}}"
        "sortable_fields"  (dict "fields" (slice "commit_date" "title"))
        "view_filters"     (dict
          "filters" (slice
            (dict "name" `published` "label" `Publicados` "field" `draft`   "pattern" false)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`   "pattern" true)
            (dict "name" `index`     "label" `Index`      "field" `noindex` "pattern" false)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex` "pattern" true)
          )
        )
        "view_groups"      (dict
          "groups" (slice
            (dict "name" `year`      "label" `Año`        "field" `commit_date` "pattern" `^\d{4}`)
            (dict "name" `month`     "label" `Mes`        "field" `commit_date` "pattern" `^\d{4}-\d{2}`)
            (dict "name" `noindex`   "label" `NoIndex`    "field" `noindex`)
            (dict "name" `drafts`    "label" `Borradores` "field" `draft`)
          )
        )
        "editor"           (dict "preview" false)
        "fields"           (slice
          $p_title
          $p_title_seo
          $p_slug
          $p_description
          $p_image
          $p_draft
          $p_noindex
          $p_translationKey
          | append (partial "cms/config/custom-params" .)
        )
      )
    -}}
  {{- end -}}

{{- end -}}


{{/*  FINAL CMS CONFIG ==============================================================================
  EMAIL+PASS LOGIN WITH NETLIFY IDENTITY
    https://decapcms.org/docs/git-gateway-backend/
  "backend"       (dict
    "name"        `git-gateway`
    "branch"      `main`
    "site_domain" (site.BaseURL | replaceRE "^https?://" "")
  )
  BUTTON LOGIN WITH GITLAB (the other option without pkce adds Netlify as an intermediary unnecessarily)
    https://decapcms.org/docs/gitlab-backend/#client-side-pkce-authorization
  "backend" (dict
    "name"      "gitlab"
    "auth_type" "pkce"
    "repo"      (replace site.Params.git_url "https://github.com/" "")
    "app_id"    site.Params.git_app_id
  )
  BUTTON LOGIN WITH GITHUB
    https://decapcms.org/docs/github-backend/
  "backend" (dict
    "name"  "github"
    "repo"  (replace site.Params.git_url "https://github.com/" "")
  )
*/}}

{{- $langs := slice -}}
{{- range .Site.Languages -}}
  {{- $langs = $langs | append .Lang -}}
{{- end -}}

{{- $cms_config := (dict
  "backend"       (dict
    "name"        `git-gateway`
    "branch"      `main`
    "site_domain" (site.BaseURL | replaceRE "^https?://" "")
  )
  "local_backend"  $local
  "media_folder"  `assets/media`
  "public_folder" ``
  "media_library"    (dict
  "max_file_size"  512000000
  "folder_support" true
  )
)
| merge (cond
  $local
  (dict
    "site_url" site.BaseURL
  )
  (cond
    (not (partial "functions/lang-param" (dict "parent" "config" "param" "cms_editorial_workflow" "default" false)))
    (cond
      (not (partial "functions/lang-param" (dict "parent" "config" "param" "development" "default" false)))
      (dict
        "site_url"    site.BaseURL
        "display_url" (print site.Home.Permalink)
      )
      (dict
        "site_url"    (print "https://" site.Params.netlify_name ".netlify.app/")
      )
    )
    (dict
      "publish_mode" "editorial_workflow"
      "site_url"     (print "https://" site.Params.netlify_name ".netlify.app/")
    )
  )
)
| merge (cond
  false
  (dict
    "i18n" (dict
      "structure"      `multiple_folders`
      "locales"        $langs
      "default_locale" .Site.Language.Lang
    )
  )
  dict
)
| merge (dict
  "logo_url"               (print "/media/" (partial "functions/lang-param" (dict "parent" "config" "param" "logo" "default" "logo.svg")))
  "locale"                 .Lang
  "slug"                   (dict
    "encoding"             `ascii`
    "clean_accents"        true
    "sanitize_replacement" `-`
  )
  "yaml"              (dict
    "parseOptions"    (dict
      "simpleKeys"    true
    )
    "documentOptions" (dict
      "simpleKeys"    true
    )
    "toStringOptions" (dict
      "simpleKeys"    true
      "singleQuote"   true
      "defaultStyle"  `|`
      "width"         `Infinity`
      "indent"        2
      "indentSeq"     false
    )
  )
  "collections" (slice
    (dict
      "label"           `✅ General`
      "name"            `config`
      "description"     `Opciones generales del sitio web`
      "sortable_fields" (dict "fields" slice)
      "editor"          (dict "preview" false)
      "files"           (slice
        (dict
          "file"      `data/config.yml`
          "extension" `yml`
          "label"     `⚙️ Configuración General`
          "name"      `data-config`
          "fields"    $data_config_fields
        )
        (dict
          "file"      `data/design.yml`
          "extension" `yml`
          "label"     `🎨 Diseño General`
          "name"      `data-design`
          "fields"    $data_design_fields
        )
        (dict
          "file"      `data/sections.yml`
          "extension" `yml`
          "label"     `🧩 Diseño de Secciones`
          "name"      `data-sections`
          "fields"    $data_sections_fields
        )
        (dict
          "file"      `data/modals.yml`
          "extension" `yml`
          "label"     `🪟 Diseño de Modales`
          "name"      `data-modals`
          "fields"    $modals_design_fields
        )
        (dict
          "file"      `data/articles.yml`
          "extension" `yml`
          "label"     `📚 Diseño de Artículos`
          "name"      `data-articles`
          "fields"    $data_articles_fields
        )
        (dict
          "file"      `data/menu.yml`
          "extension" `yml`
          "label"     `🔗 Diseño de Menú`
          "name"      `data-menu`
          "fields"    (
            (slice
              (dict "label" `Logo`                              "name" `logo`                 "widget" `image`   "required" false "max_file_size" 512000000)
              $color
              (dict "label" `Ancho de Despliegue`               "name" `screen_sticky`        "widget" `number`  "required" false "value_type" `int` "min" 0 "max" 9999 "hint" "Es el ancho de la ventana a partir del cual el menú de las páginas seccionadas se mantiene desplegado en la parte superior · Si no se especifica o se deja en 0, se mantendrá siempre plegado")
              (dict "label" `Tamaño de Contenedor`              "name" `size_sticky`          "widget" `select`  "required" false "options" $options.size_container       "hint" "Es el ancho máximo del contenedor del menú desplegado de las páginas seccionadas")
              (dict "label" `Desplegado en Artículos`           "name" `articles_sticky`      "widget" `boolean` "default" false)
              (dict "label" `Inicio Transparente`               "name" `transparent`          "widget" `boolean` "default" false)
              (dict "label" `Ocultar Enlaces Ancla`             "name" `hide_anchors`         "widget" `boolean` "default" false                                         "hint" "Oculta todos los enlaces que se generan de forma automática")
              (dict "label" `Ocultar Iconos`                    "name" `hide_icons`           "widget" `boolean` "default" false)
              (dict "label" `Mostrar Modales`                   "name" `show_modals`          "widget" `boolean` "default" false                                         "hint" "Mostrar enlaces hacia secciones de tipo modal como subelementos desplegables (no recomendado si hay muchos)")
              (dict "label" `Enlace Automático al Blog`         "name" `show_blog_auto`       "widget" `boolean` "default" false                                         "hint" "Mostrar enlaces hacia entradas del blog automáticamente como subelementos desplegables en 'Más'")
              (dict "label" `Enlace Automático a Productos`     "name" `show_products_auto`   "widget" `boolean` "default" false                                         "hint" "Mostrar enlaces hacia productos automáticamente como subelementos desplegables en 'Más'")
              (dict "label" `Enlace Automático a Taxonomías`    "name" `show_taxonomies_auto` "widget" `boolean` "default" false                                         "hint" "Mostrar enlaces hacia taxonomías automáticamente como subelementos desplegables en 'Más'")
              (dict "label" `Enlace Automático al Buscador`     "name" `search`               "widget" `boolean` "default" false                                         "hint" "Ofrece un buscador rápido para todos los contenidos que aparecerá enlazado en el menú")
              (dict "label" `Traductor de Google`               "name" `google_translate`     "widget" `boolean` "default" false                                         "hint" "Añade en el menú la opción de traducir automáticamente a múltiples idiomas (no indexables por Google)")
              (dict "label" `Idiomas y Traductor en Menú "Más"` "name" `langs_in_more`        "widget" `boolean` "default" false                                         "hint" "Cambia la ubicación de los enlaces de idiomas y traducción al desplegable 'Más'")
              (dict "label" `Idiomas Desplegados`               "name" `langs_out`            "widget" `boolean` "default" false                                         "hint" "Muestra los idiomas directamente sin nombres, fuera del desplegable 'Más' aunque cambie la ubicación anterior")
              (dict "label" `Activar Botones de Esquina`        "name" `callnow_active`       "widget" `boolean` "default" false                                         "hint" "Botones de la Esquina Inferior Izquierda que se suelen utilizar para llamadas a la acción siempre visibles · Si está activado y no se añaden a continuación, se usará el primer número de WhatsApp o de teléfono que se encuentre en alguna sección con fila de tipo contacto (de haberlo)")
            )
            | append $data_menu_fields
          )
        )
        (dict
          "file"      `hugo.yml`
          "extension" `yml`
          "label"     `💬 Idiomas`
          "name"      `hugo`
          "fields"    (
            $config_fields
            | append (slice
              (dict "label" `Idioma Principal`   "name" `defaultContentLanguage` "widget" `select`                            "required"  true  "options" $options.langs "default" `es`                                                      "hint" "Español por defecto")
              (dict "label" `Desactivar Idiomas` "name" `disableLanguages`       "widget" (cond $multihost `hidden` `select`) "required"  false "options" $options.langs "default" site.Data.utilities.default_disable_langs "multiple" true "hint" "Todos menos el Español por defecto")
              (dict "label" (i18n "languages")   "name" `languages`              "widget" `object`                            "collapsed" true  "fields"  $languajes_permalinks )
            )
          )
        )
        (dict
          "file"      `data/redirects.md`
          "extension" `md`
          "label"     `↪️ Redirecciones`
          "name"      `redirects`
          "fields"    (slice
            (dict "label" `Redirecciones` "name" `body` "widget" `text` "required" false
              "hint" "Redirecciones de URL's → [Opciones](https://docs.netlify.com/routing/redirects/redirect-options/)"
            )
          )
        )
        (dict
          "file"      `data/robots.md`
          "extension" `md`
          "label"     `🤖 Robots.txt`
          "name"      `robots`
          "fields"    (slice
            (dict "label" `robots.txt` "name" `body` "widget" `text` "required" false
              "hint" "Tutorial → [Guía del archivo robots.txt](https://boluda.com/tutorial/guia-del-archivo-robots-txt/)"
            )
          )
        )
      )
    )
    | append $colections_langs
  )
) -}}

{{- if hugo.IsProduction -}}
  {{- $cms_config | jsonify -}}
{{- else -}}
  {{- $cms_config | jsonify (dict "prefix" " " "indent" "  ") -}}
{{- end -}}
